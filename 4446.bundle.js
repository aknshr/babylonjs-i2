"use strict";(self.webpackChunk_dev_inspector_v2=self.webpackChunk_dev_inspector_v2||[]).push([[4446],{94446:(t,e,n)=>{n.d(e,{EXT_lights_area:()=>_});var s=n(31273),i=n(43291),a=n(14390),o=n(87670),l=n(76930),r=n(69884),h=n(96734);const c="EXT_lights_area";class _{constructor(t){this.name=c,this._loader=t,this.enabled=this._loader.isExtensionUsed(c)}dispose(){this._loader=null,delete this._lights}onLoading(){const t=this._loader.gltf.extensions;if(t&&t[this.name]){const e=t[this.name];this._lights=e.lights,r.l2.Assign(this._lights)}}loadNodeAsync(t,e,n){return r.BT.LoadExtensionAsync(t,e,this.name,(async(h,c)=>(this._loader._allMaterialsDirtyRequired=!0,await this._loader.loadNodeAsync(t,e,(t=>{let e;const _=r.l2.Get(h,this._lights,c.light),d=_.name||t.name;this._loader.babylonScene._blockEntityCollection=!!this._loader._assetContainer;const b=void 0!==_.size?_.size:1;switch(_.type){case"rect":{const t=void 0!==_.rect?.aspect?_.rect.aspect*b:b,n=b;e=new o.u(d,s.Pq.Zero(),t,n,this._loader.babylonScene);break}case"disk":{const t=Math.sqrt(b*b*.25*Math.PI);e=new o.u(d,s.Pq.Zero(),t,t,this._loader.babylonScene);break}default:throw this._loader.babylonScene._blockEntityCollection=!1,new Error(`${h}: Invalid area light type (${_.type})`)}e._parentContainer=this._loader._assetContainer,this._loader.babylonScene._blockEntityCollection=!1,_._babylonLight=e,e.falloffType=a.v.FALLOFF_GLTF,e.diffuse=_.color?i.v9.FromArray(_.color):i.v9.White(),e.intensity=null==_.intensity?1:_.intensity;const y=new l.V(`${d}_orientation`,this._loader.babylonScene);y.rotationQuaternion=s.PT.RotationAxis(s.Pq.Up(),Math.PI),y.parent=t,e.parent=y,this._loader._babylonLights.push(e),r.BT.AddPointerMetadata(e,h),n(t)})))))}}(0,h.Hg)(c),(0,h.Ye)(c,!0,(t=>new _(t)))}}]);
//# sourceMappingURL=4446.bundle.js.map