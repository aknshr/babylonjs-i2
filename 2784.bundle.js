"use strict";(self.webpackChunk_dev_inspector_v2=self.webpackChunk_dev_inspector_v2||[]).push([[2784],{12784:(e,t,a)=>{a.r(t),a.d(t,{CreateToolsServiceDefinition:()=>ye,default:()=>ve});var s=a(11798),i=a(43912),n=a(53768),l=a(35647),r=a(68164),o=a(46070),c=(a(78672),a(41462)),h=a(41766),d=a(21466),u=a(45256),p=a(51164),m=a(86954),C=a(84443);const x=e=>(0,s.jsxs)(C.A,{icon:l.cFrp,children:[" ",e.children," "]});var b=a(38871),y=a(45969);const v=(0,y.n9w)({section:{display:"flex",flexDirection:"column",rowGap:y.LU0.spacingVerticalM},row:{display:"flex",alignItems:"center",gap:"4px"}}),g=({children:e})=>{const t=v();return(0,s.jsx)("div",{className:t.section,children:e})},j=({children:e})=>{const t=v();return(0,s.jsx)("div",{className:t.row,children:e})},k=function(e){const t=e.activeCamera;t&&void 0!==t.radius&&(t.radius=5)},f=({scene:e})=>{const[t,a]=(0,h.useState)({name:"Sphere",segments:32,diameter:1,diameterX:1,diameterY:1,diameterZ:1,arc:1,slice:1,uniform:!0}),i=(e,t)=>{a((a=>({...a,[e]:t})))},[n,l]=(0,h.useState)({name:"Box",size:1,width:1,height:1,depth:1}),r=(e,t)=>{l((a=>({...a,[e]:t})))},[o,C]=(0,h.useState)({name:"Cylinder",height:2,diameterTop:1,diameterBottom:1,diameter:1,tessellation:32,subdivisions:1,arc:1}),y=(e,t)=>{C((a=>({...a,[e]:t})))},[v,f]=(0,h.useState)({name:"Cone",height:2,diameter:1,diameterTop:0,diameterBottom:1,tessellation:32,subdivisions:1,arc:1}),[P,_]=(0,h.useState)(!0),S=(e,t)=>{f((a=>({...a,[e]:t})))},[w,F]=(0,h.useState)({name:"Ground",width:10,height:10,subdivisions:1,subdivisionsX:1,subdivisionsY:1}),M=(e,t)=>{F((a=>({...a,[e]:t})))},D=(0,h.useRef)(null),[O,N]=(0,h.useState)("ImportedMesh");return(0,s.jsxs)(g,{children:[(0,s.jsxs)(j,{children:[(0,s.jsx)(d.$,{onClick:()=>{c.P.CreateSphere("Sphere",{},e),k(e)},label:"Sphere"}),(0,s.jsxs)(x,{children:[(0,s.jsx)(u.F,{label:"Name",value:t.name,onChange:e=>i("name",e)}),(0,s.jsx)(p.c,{label:"Segments",value:t.segments,min:0,onChange:e=>i("segments",e)}),(0,s.jsx)(p.c,{label:"Diameter",value:t.diameter,min:0,step:.1,onChange:e=>i("diameter",e),disabled:!t.uniform}),(0,s.jsx)(b.r,{label:"Uniform",value:t.uniform,onChange:e=>i("uniform",e)}),(0,s.jsx)(p.c,{label:"Diameter X",value:t.diameterX,min:0,step:.1,onChange:e=>i("diameterX",e),disabled:t.uniform}),(0,s.jsx)(p.c,{label:"Diameter Y",value:t.diameterY,min:0,step:.1,onChange:e=>i("diameterY",e),disabled:t.uniform}),(0,s.jsx)(p.c,{label:"Diameter Z",value:t.diameterZ,min:0,step:.1,onChange:e=>i("diameterZ",e),disabled:t.uniform}),(0,s.jsx)(p.c,{label:"Arc",value:t.arc,min:0,max:1,step:.1,onChange:e=>i("arc",e)}),(0,s.jsx)(p.c,{label:"Slice",value:t.slice,min:0,max:1,step:.1,onChange:e=>i("slice",e)}),(0,s.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",gap:8,marginTop:16},children:(0,s.jsx)(d.$,{appearance:"primary",onClick:()=>{const a={segments:t.segments,arc:t.arc,slice:t.slice};t.uniform?a.diameter=t.diameter:(a.diameterX=t.diameterX,a.diameterY=t.diameterY,a.diameterZ=t.diameterZ),c.P.CreateSphere(t.name,a,e),k(e)},label:"Create"})})]})]}),(0,s.jsxs)(j,{children:[(0,s.jsx)(d.$,{onClick:()=>{c.P.CreateBox("Box",{},e),k(e)},label:"Box"}),(0,s.jsxs)(x,{children:[(0,s.jsx)(u.F,{label:"Name",value:n.name,onChange:e=>r("name",e)}),(0,s.jsx)(p.c,{label:"Size",value:n.size,min:0,step:.1,onChange:e=>r("size",e)}),(0,s.jsx)(p.c,{label:"Width",value:n.width,min:0,step:.1,onChange:e=>r("width",e)}),(0,s.jsx)(p.c,{label:"Height",value:n.height,min:0,step:.1,onChange:e=>r("height",e)}),(0,s.jsx)(p.c,{label:"Depth",value:n.depth,min:0,step:.1,onChange:e=>r("depth",e)}),(0,s.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",gap:8,marginTop:16},children:(0,s.jsx)(d.$,{appearance:"primary",onClick:()=>{c.P.CreateBox(n.name,n,e),k(e)},label:"Create"})})]})]}),(0,s.jsxs)(j,{children:[(0,s.jsx)(d.$,{onClick:()=>{c.P.CreateCylinder("Cylinder",{},e),k(e)},label:"Cylinder"}),(0,s.jsxs)(x,{children:[(0,s.jsx)(u.F,{label:"Name",value:o.name,onChange:e=>y("name",e)}),(0,s.jsx)(p.c,{label:"Height",value:o.height,min:0,step:.1,onChange:e=>y("height",e)}),(0,s.jsx)(p.c,{label:"Diameter Top",value:o.diameterTop,min:0,step:.1,onChange:e=>y("diameterTop",e)}),(0,s.jsx)(p.c,{label:"Diameter Bottom",value:o.diameterBottom,min:0,step:.1,onChange:e=>y("diameterBottom",e)}),(0,s.jsx)(p.c,{label:"Diameter",value:o.diameter,min:0,step:.1,onChange:e=>y("diameter",e)}),(0,s.jsx)(p.c,{label:"Tessellation",value:o.tessellation,min:3,onChange:e=>y("tessellation",e)}),(0,s.jsx)(p.c,{label:"Subdivisions",value:o.subdivisions,min:1,onChange:e=>y("subdivisions",e)}),(0,s.jsx)(p.c,{label:"Arc",value:o.arc,min:0,max:1,step:.1,onChange:e=>y("arc",e)}),(0,s.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",gap:8,marginTop:16},children:(0,s.jsx)(d.$,{appearance:"primary",onClick:()=>{c.P.CreateCylinder(o.name,o,e),k(e)},label:"Create"})})]})]}),(0,s.jsxs)(j,{children:[(0,s.jsx)(d.$,{onClick:()=>{c.P.CreateCylinder("Cone",{diameterTop:0},e),k(e)},label:"Cone"}),(0,s.jsxs)(x,{children:[(0,s.jsx)(u.F,{label:"Name",value:v.name,onChange:e=>S("name",e)}),(0,s.jsx)(p.c,{label:"Height",value:v.height,min:0,step:.1,onChange:e=>S("height",e)}),(0,s.jsx)(p.c,{label:"Diameter",value:v.diameter,min:0,step:.1,onChange:e=>S("diameter",e)}),(0,s.jsx)(p.c,{label:"Tessellation",value:v.tessellation,min:3,onChange:e=>S("tessellation",e)}),(0,s.jsx)(p.c,{label:"Subdivisions",value:v.subdivisions,min:1,onChange:e=>S("subdivisions",e)}),(0,s.jsx)(p.c,{label:"Arc",value:v.arc,min:0,max:1,step:.1,onChange:e=>S("arc",e)}),(0,s.jsx)(b.r,{label:"Up",value:P,onChange:e=>_(e)}),(0,s.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",gap:8,marginTop:16},children:(0,s.jsx)(d.$,{appearance:"primary",onClick:()=>{const t={...v,diameterTop:P?0:v.diameterTop,diameterBottom:P?v.diameterBottom:0};c.P.CreateCylinder(v.name,t,e),k(e)},label:"Create"})})]})]}),(0,s.jsxs)(j,{children:[(0,s.jsx)(d.$,{onClick:()=>{c.P.CreateGround("Ground",{},e),k(e)},label:"Ground"}),(0,s.jsxs)(x,{children:[(0,s.jsx)(u.F,{label:"Name",value:w.name,onChange:e=>M("name",e)}),(0,s.jsx)(p.c,{label:"Width",value:w.width,min:0,step:.1,onChange:e=>M("width",e)}),(0,s.jsx)(p.c,{label:"Height",value:w.height,min:0,step:.1,onChange:e=>M("height",e)}),(0,s.jsx)(p.c,{label:"Subdivisions",value:w.subdivisions,min:1,onChange:e=>M("subdivisions",e)}),(0,s.jsx)(p.c,{label:"Subdivisions X",value:w.subdivisionsX,min:1,onChange:e=>M("subdivisionsX",e)}),(0,s.jsx)(p.c,{label:"Subdivisions Y",value:w.subdivisionsY,min:1,onChange:e=>M("subdivisionsY",e)}),(0,s.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",gap:8,marginTop:16},children:(0,s.jsx)(d.$,{appearance:"primary",onClick:()=>{c.P.CreateGround(w.name,w,e),k(e)},label:"Create"})})]})]}),(0,s.jsxs)(j,{children:[(0,s.jsx)(d.$,{onClick:()=>{D.current?.click()},label:"Import Mesh"}),(0,s.jsxs)(x,{children:[(0,s.jsx)(u.F,{label:"Name",value:O,onChange:e=>N(e)}),(0,s.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",gap:8},children:(0,s.jsx)(d.$,{appearance:"primary",onClick:()=>{D.current?.click()},label:"Import"})})]}),(0,s.jsx)("input",{ref:D,type:"file",accept:".babylon,.glb,.gltf,.obj,.stl,.ply,.mesh,.babylonmeshdata",multiple:!0,style:{display:"none"},onChange:t=>{const a=t.target.files;if(!a||0===a.length)return;const s=Array.from(a);if(O.trim().length>0&&s.length>0){const e=s[0],t=e.name.lastIndexOf("."),a=t>=0?e.name.substring(t):"",i=O.trim(),n=i.toLowerCase().endsWith(a.toLowerCase())?i:`${i}${a}`;s[0]=new File([e],n,{type:e.type,lastModified:e.lastModified})}const i=new m.M(e.getEngine(),e,null,null,null,null,null,null,((e,t,a)=>{alert(a?`Failed to import mesh: ${a}`:"Failed to import mesh.")}),!0);i.displayLoadingUI=!1,i.loadFiles({target:{files:s}}),i.dispose(),t.target.value=""}})]})]})};var P=a(88354),_=a(34893),S=a(83959);const w=({scene:e})=>{const[t,a]=(0,h.useState)("Node Material"),[i,n]=(0,h.useState)(""),[l,r]=(0,h.useState)("PBR Material"),[o,c]=(0,h.useState)("Standard Material"),p=async()=>{if(i)try{(await P.M.ParseFromSnippetAsync(i,e)).name=t}catch(e){alert("Failed to load Node Material from snippet: "+e)}else new P.M(t,e).build()},m=()=>{new _.PBRMaterial(l,e)},C=()=>{new S.F(o,e)};return(0,s.jsxs)(g,{children:[(0,s.jsxs)(j,{children:[(0,s.jsx)(d.$,{onClick:p,label:"Node Material"}),(0,s.jsxs)(x,{children:[(0,s.jsx)(u.F,{label:"Name",value:t,onChange:e=>a(e)}),(0,s.jsx)(u.F,{label:"Snippet ID",value:i,onChange:e=>n(e)}),(0,s.jsx)(d.$,{appearance:"primary",onClick:p,label:"Create"})]})]}),(0,s.jsxs)(j,{children:[(0,s.jsx)(d.$,{onClick:m,label:"PBR Material"}),(0,s.jsxs)(x,{children:[(0,s.jsx)(u.F,{label:"Name",value:l,onChange:e=>r(e)}),(0,s.jsx)(d.$,{appearance:"primary",onClick:m,label:"Create"})]})]}),(0,s.jsxs)(j,{children:[(0,s.jsx)(d.$,{onClick:C,label:"Standard Material"}),(0,s.jsxs)(x,{children:[(0,s.jsx)(u.F,{label:"Name",value:o,onChange:e=>c(e)}),(0,s.jsx)(d.$,{appearance:"primary",onClick:C,label:"Create"})]})]})]})};var F=a(65198),M=a(75200),D=a(814),O=a(31273),N=a(53845);const $=({scene:e})=>{const[t,a]=(0,h.useState)("Point Light"),[i,n]=(0,h.useState)(new O.Pq(0,5,0)),[l,r]=(0,h.useState)("Directional Light"),[o,c]=(0,h.useState)(new O.Pq(1,-1,0)),[m,C]=(0,h.useState)("Spotlight"),[b,y]=(0,h.useState)(new O.Pq(0,5,0)),[v,k]=(0,h.useState)(new O.Pq(0,-1,0)),[f,P]=(0,h.useState)(1),[_,S]=(0,h.useState)(1),w=()=>{new F.H(t,i,e).intensity=1},$=()=>{new M.Z(l,o,e).intensity=1},R=()=>{new D.n(m,b,v,f,_,e).intensity=1};return(0,s.jsxs)(g,{children:[(0,s.jsxs)(j,{children:[(0,s.jsx)(d.$,{onClick:w,label:"Point Light"}),(0,s.jsxs)(x,{children:[(0,s.jsx)(u.F,{label:"Name",value:t,onChange:e=>a(e)}),(0,s.jsx)(N.We,{label:"Position",value:i,onChange:e=>n(e)}),(0,s.jsx)(d.$,{appearance:"primary",onClick:w,label:"Create"})]})]}),(0,s.jsxs)(j,{children:[(0,s.jsx)(d.$,{onClick:$,label:"Directional Light"}),(0,s.jsxs)(x,{children:[(0,s.jsx)(u.F,{label:"Name",value:l,onChange:e=>r(e)}),(0,s.jsx)(N.We,{label:"Direction",value:o,onChange:e=>c(e)}),(0,s.jsx)(d.$,{appearance:"primary",onClick:$,label:"Create"})]})]}),(0,s.jsxs)(j,{children:[(0,s.jsx)(d.$,{onClick:R,label:"Spotlight"}),(0,s.jsxs)(x,{children:[(0,s.jsx)(u.F,{label:"Name",value:m,onChange:e=>C(e)}),(0,s.jsx)(N.We,{label:"Position",value:b,onChange:e=>y(e)}),(0,s.jsx)(N.We,{label:"Direction",value:v,onChange:e=>k(e)}),(0,s.jsx)(p.c,{label:"Angle",value:f,onChange:e=>P(e),min:0,max:Math.PI,step:.1}),(0,s.jsx)(p.c,{label:"Exponent",value:_,onChange:e=>S(e),min:0,max:10,step:.1}),(0,s.jsx)(d.$,{appearance:"primary",onClick:R,label:"Create"})]})]})]})};var R=a(12977),T=a(17083),B=a(1348),I=a(79014),L=a(55823),K=a(88337),E=a(9459),A=a(70480),G=a(72046),U=a(66799),q=a(21148);class Z{constructor(){this.buttons=[0,1,2],this.buttonsYaw=[-1,0,1],this.buttonsPitch=[-1,0,1],this.buttonsRoll=[2],this.activeButton=-1,this.angularSensibility=1e3,this._previousPosition=null}attachControl(e){e=q.S0.BackCompatCameraNoPreventDefault(arguments),this._noPreventDefault=e,this._observer=this.camera.getScene()._inputManager._addCameraPointerObserver((e=>{this._pointerInput(e)}),G.Zp.POINTERDOWN|G.Zp.POINTERUP|G.Zp.POINTERMOVE),this._rollObserver=this.camera.getScene().onBeforeRenderObservable.add((()=>{this.camera.rollCorrect&&this.camera.restoreRoll(this.camera.rollCorrect)}))}detachControl(){this._observer&&(this.camera.getScene()._inputManager._removeCameraPointerObserver(this._observer),this.camera.getScene().onBeforeRenderObservable.remove(this._rollObserver),this._observer=null,this._rollObserver=null,this._previousPosition=null,this._noPreventDefault=void 0)}getClassName(){return"FlyCameraMouseInput"}getSimpleName(){return"mouse"}_pointerInput(e){const t=e.event,a=this.camera.getEngine();if(!this.touchEnabled&&"touch"===t.pointerType)return;if(e.type!==G.Zp.POINTERMOVE&&-1===this.buttons.indexOf(t.button))return;const s=t.target;if(e.type===G.Zp.POINTERDOWN){try{s?.setPointerCapture(t.pointerId)}catch(t){}this._previousPosition={x:t.clientX,y:t.clientY},this.activeButton=t.button,this._noPreventDefault||t.preventDefault(),a.isPointerLock&&this._onMouseMove(e.event)}else if(e.type===G.Zp.POINTERUP){try{s?.releasePointerCapture(t.pointerId)}catch(t){}this.activeButton=-1,this._previousPosition=null,this._noPreventDefault||t.preventDefault()}else if(e.type===G.Zp.POINTERMOVE){if(!this._previousPosition)return void(a.isPointerLock&&this._onMouseMove(e.event));const s=t.clientX-this._previousPosition.x,i=t.clientY-this._previousPosition.y;this._rotateCamera(s,i),this._previousPosition={x:t.clientX,y:t.clientY},this._noPreventDefault||t.preventDefault()}}_onMouseMove(e){if(!this.camera.getEngine().isPointerLock)return;const t=e.movementX,a=e.movementY;this._rotateCamera(t,a),this._previousPosition=null,this._noPreventDefault||e.preventDefault()}_rotateCamera(e,t){const a=this.camera,s=a._calculateHandednessMultiplier(),i=e*s/this.angularSensibility,n=t*s/this.angularSensibility,l=O.PT.RotationYawPitchRoll(a.rotation.y,a.rotation.x,a.rotation.z);let r;if(this.buttonsPitch.some((e=>e===this.activeButton))&&(r=O.PT.RotationAxis(U._0.X,n),l.multiplyInPlace(r)),this.buttonsYaw.some((e=>e===this.activeButton))){r=O.PT.RotationAxis(U._0.Y,i),l.multiplyInPlace(r);const e=a.bankedTurnLimit+a._trackRoll;if(a.bankedTurn&&-e<a.rotation.z&&a.rotation.z<e){const e=a.bankedTurnMultiplier*-i;r=O.PT.RotationAxis(U._0.Z,e),l.multiplyInPlace(r)}}this.buttonsRoll.some((e=>e===this.activeButton))&&(r=O.PT.RotationAxis(U._0.Z,-i),a._trackRoll-=i,l.multiplyInPlace(r)),l.toEulerAnglesToRef(a.rotation)}}(0,L.Cg)([(0,K.lK)()],Z.prototype,"buttons",void 0),(0,L.Cg)([(0,K.lK)()],Z.prototype,"angularSensibility",void 0),A.H.FlyCameraMouseInput=Z;var Y=a(45336);class W{constructor(){this.keysForward=[87],this.keysBackward=[83],this.keysUp=[69],this.keysDown=[81],this.keysRight=[68],this.keysLeft=[65],this._keys=new Array}attachControl(e){e=q.S0.BackCompatCameraNoPreventDefault(arguments),this._onCanvasBlurObserver||(this._scene=this.camera.getScene(),this._engine=this._scene.getEngine(),this._onCanvasBlurObserver=this._engine.onCanvasBlurObservable.add((()=>{this._keys.length=0})),this._onKeyboardObserver=this._scene.onKeyboardObservable.add((t=>{const a=t.event;if(t.type===Y.TB.KEYDOWN)-1===this.keysForward.indexOf(a.keyCode)&&-1===this.keysBackward.indexOf(a.keyCode)&&-1===this.keysUp.indexOf(a.keyCode)&&-1===this.keysDown.indexOf(a.keyCode)&&-1===this.keysLeft.indexOf(a.keyCode)&&-1===this.keysRight.indexOf(a.keyCode)||(-1===this._keys.indexOf(a.keyCode)&&this._keys.push(a.keyCode),e||a.preventDefault());else if(-1!==this.keysForward.indexOf(a.keyCode)||-1!==this.keysBackward.indexOf(a.keyCode)||-1!==this.keysUp.indexOf(a.keyCode)||-1!==this.keysDown.indexOf(a.keyCode)||-1!==this.keysLeft.indexOf(a.keyCode)||-1!==this.keysRight.indexOf(a.keyCode)){const t=this._keys.indexOf(a.keyCode);t>=0&&this._keys.splice(t,1),e||a.preventDefault()}})))}detachControl(){this._scene&&(this._onKeyboardObserver&&this._scene.onKeyboardObservable.remove(this._onKeyboardObserver),this._onCanvasBlurObserver&&this._engine.onCanvasBlurObservable.remove(this._onCanvasBlurObserver),this._onKeyboardObserver=null,this._onCanvasBlurObserver=null),this._keys.length=0}getClassName(){return"FlyCameraKeyboardInput"}_onLostFocus(){this._keys.length=0}getSimpleName(){return"keyboard"}checkInputs(){if(this._onKeyboardObserver){const e=this.camera;for(let t=0;t<this._keys.length;t++){const a=this._keys[t],s=e._computeLocalCameraSpeed();-1!==this.keysForward.indexOf(a)?e._localDirection.copyFromFloats(0,0,s):-1!==this.keysBackward.indexOf(a)?e._localDirection.copyFromFloats(0,0,-s):-1!==this.keysUp.indexOf(a)?e._localDirection.copyFromFloats(0,s,0):-1!==this.keysDown.indexOf(a)?e._localDirection.copyFromFloats(0,-s,0):-1!==this.keysRight.indexOf(a)?e._localDirection.copyFromFloats(s,0,0):-1!==this.keysLeft.indexOf(a)&&e._localDirection.copyFromFloats(-s,0,0),e.getScene().useRightHandedSystem&&(e._localDirection.z*=-1),e.getViewMatrix().invertToRef(e._cameraTransformMatrix),O.Pq.TransformNormalToRef(e._localDirection,e._cameraTransformMatrix,e._transformedDirection),e.cameraDirection.addInPlace(e._transformedDirection)}}}}(0,L.Cg)([(0,K.lK)()],W.prototype,"keysForward",void 0),(0,L.Cg)([(0,K.lK)()],W.prototype,"keysBackward",void 0),(0,L.Cg)([(0,K.lK)()],W.prototype,"keysUp",void 0),(0,L.Cg)([(0,K.lK)()],W.prototype,"keysDown",void 0),(0,L.Cg)([(0,K.lK)()],W.prototype,"keysRight",void 0),(0,L.Cg)([(0,K.lK)()],W.prototype,"keysLeft",void 0),A.H.FlyCameraKeyboardInput=W;class X extends A._{constructor(e){super(e)}addKeyboard(){return this.add(new W),this}addMouse(){return this.add(new Z),this}}var z=a(72062),H=a(67416);class V extends E.F{get angularSensibility(){const e=this.inputs.attached.mouse;return e?e.angularSensibility:0}set angularSensibility(e){const t=this.inputs.attached.mouse;t&&(t.angularSensibility=e)}get keysForward(){const e=this.inputs.attached.keyboard;return e?e.keysForward:[]}set keysForward(e){const t=this.inputs.attached.keyboard;t&&(t.keysForward=e)}get keysBackward(){const e=this.inputs.attached.keyboard;return e?e.keysBackward:[]}set keysBackward(e){const t=this.inputs.attached.keyboard;t&&(t.keysBackward=e)}get keysUp(){const e=this.inputs.attached.keyboard;return e?e.keysUp:[]}set keysUp(e){const t=this.inputs.attached.keyboard;t&&(t.keysUp=e)}get keysDown(){const e=this.inputs.attached.keyboard;return e?e.keysDown:[]}set keysDown(e){const t=this.inputs.attached.keyboard;t&&(t.keysDown=e)}get keysLeft(){const e=this.inputs.attached.keyboard;return e?e.keysLeft:[]}set keysLeft(e){const t=this.inputs.attached.keyboard;t&&(t.keysLeft=e)}get keysRight(){const e=this.inputs.attached.keyboard;return e?e.keysRight:[]}set keysRight(e){const t=this.inputs.attached.keyboard;t&&(t.keysRight=e)}constructor(e,t,a,s=!0){super(e,t,a,s),this.ellipsoid=new O.Pq(1,1,1),this.ellipsoidOffset=new O.Pq(0,0,0),this.checkCollisions=!1,this.applyGravity=!1,this.cameraDirection=O.Pq.Zero(),this._trackRoll=0,this.rollCorrect=100,this.bankedTurn=!1,this.bankedTurnLimit=Math.PI/2,this.bankedTurnMultiplier=1,this._needMoveForGravity=!1,this._oldPosition=O.Pq.Zero(),this._diffPosition=O.Pq.Zero(),this._newPosition=O.Pq.Zero(),this._collisionMask=-1,this._onCollisionPositionChange=(e,t,a=null)=>{(e=>{this._newPosition.copyFrom(e),this._newPosition.subtractToRef(this._oldPosition,this._diffPosition),this._diffPosition.length()>H.$.CollisionsEpsilon&&(this.position.addInPlace(this._diffPosition),this.onCollide&&a&&this.onCollide(a))})(t)},this.inputs=new X(this),this.inputs.addKeyboard().addMouse()}attachControl(e,t){t=q.S0.BackCompatCameraNoPreventDefault(arguments),this.inputs.attachElement(t)}detachControl(){this.inputs.detachElement(),this.cameraDirection=new O.Pq(0,0,0)}get collisionMask(){return this._collisionMask}set collisionMask(e){this._collisionMask=isNaN(e)?-1:e}_collideWithWorld(e){let t;t=this.parent?O.Pq.TransformCoordinates(this.position,this.parent.getWorldMatrix()):this.position,t.subtractFromFloatsToRef(0,this.ellipsoid.y,0,this._oldPosition),this._oldPosition.addInPlace(this.ellipsoidOffset);const a=this.getScene().collisionCoordinator;this._collider||(this._collider=a.createCollider()),this._collider._radius=this.ellipsoid,this._collider.collisionMask=this._collisionMask;let s=e;this.applyGravity&&(s=e.add(this.getScene().gravity)),a.getNewPosition(this._oldPosition,s,this._collider,3,null,this._onCollisionPositionChange,this.uniqueId)}_checkInputs(){this._localDirection||(this._localDirection=O.Pq.Zero(),this._transformedDirection=O.Pq.Zero()),this.inputs.checkInputs(),super._checkInputs()}set needMoveForGravity(e){this._needMoveForGravity=e}get needMoveForGravity(){return this._needMoveForGravity}_decideIfNeedsToMove(){return this._needMoveForGravity||Math.abs(this.cameraDirection.x)>0||Math.abs(this.cameraDirection.y)>0||Math.abs(this.cameraDirection.z)>0}_updatePosition(){this.checkCollisions&&this.getScene().collisionsEnabled?this._collideWithWorld(this.cameraDirection):super._updatePosition()}restoreRoll(e){const t=this._trackRoll,a=t-this.rotation.z;Math.abs(a)>=.001&&(this.rotation.z+=a/e,Math.abs(t-this.rotation.z)<=.001&&(this.rotation.z=t))}dispose(){this.inputs.clear(),super.dispose()}getClassName(){return"FlyCamera"}}(0,L.Cg)([(0,K.P_)()],V.prototype,"ellipsoid",void 0),(0,L.Cg)([(0,K.P_)()],V.prototype,"ellipsoidOffset",void 0),(0,L.Cg)([(0,K.lK)()],V.prototype,"checkCollisions",void 0),(0,L.Cg)([(0,K.lK)()],V.prototype,"applyGravity",void 0),(0,z.Y5)("BABYLON.FlyCamera",V);var Q=a(47784);const J=({scene:e})=>{const[t,a]=(0,h.useState)("ArcRotate Camera"),[i,n]=(0,h.useState)(new O.Pq(0,0,0)),[l,r]=(0,h.useState)(10),[o,c]=(0,h.useState)(0),[m,C]=(0,h.useState)(45),[y,v]=(0,h.useState)(!1),[k,f]=(0,h.useState)("Universal Camera"),[P,_]=(0,h.useState)(new O.Pq(0,1,-10)),[S,w]=(0,h.useState)("Free Camera"),[F,M]=(0,h.useState)(new O.Pq(0,1,-10)),[D,$]=(0,h.useState)("Follow Camera"),[L,K]=(0,h.useState)(new O.Pq(0,5,-10)),[E,A]=(0,h.useState)(10),[G,U]=(0,h.useState)(4),[q,Z]=(0,h.useState)(0),[Y,W]=(0,h.useState)("Fly Camera"),[X,z]=(0,h.useState)(new O.Pq(0,1,-10)),[H,J]=(0,h.useState)("Geospatial Camera"),[ee,te]=(0,h.useState)(6371e3),ae=()=>{const a=y?o:o*Math.PI/180,s=y?m:m*Math.PI/180,n=new R.Lq(t,a,s,l,i,e);n.attachControl(e.getEngine().getRenderingCanvas(),!0),e.activeCamera||(e.activeCamera=n)},se=()=>{const t=new T.d(k,P,e);t.attachControl(e.getEngine().getRenderingCanvas(),!0),e.activeCamera||(e.activeCamera=t)},ie=()=>{const t=new B.S(S,F,e);t.attachControl(e.getEngine().getRenderingCanvas(),!0),e.activeCamera||(e.activeCamera=t)},ne=()=>{const t=new I.p(D,L,e);t.radius=E,t.heightOffset=G,t.rotationOffset=q,t.attachControl(!0),e.activeCamera||(e.activeCamera=t)},le=()=>{const t=new V(Y,X,e);t.attachControl(!0),e.activeCamera||(e.activeCamera=t)},re=()=>{const t=new Q.H(H,e,{planetRadius:ee});t.attachControl(!0),e.activeCamera||(e.activeCamera=t)};return(0,s.jsxs)(g,{children:[(0,s.jsxs)(j,{children:[(0,s.jsx)(d.$,{onClick:ae,label:"ArcRotate Camera"}),(0,s.jsxs)(x,{children:[(0,s.jsx)(u.F,{label:"Name",value:t,onChange:e=>a(e)}),(0,s.jsx)(N.We,{label:"Target",value:i,onChange:e=>n(e)}),(0,s.jsx)(p.c,{label:"Radius",value:l,onChange:e=>r(e),min:.1,max:1e3,step:.5}),(0,s.jsx)(p.c,{label:"Alpha "+(y?"(rad)":"(deg)"),value:o,onChange:e=>c(e),min:y?2*-Math.PI:-360,max:y?2*Math.PI:360,step:y?.1:5}),(0,s.jsx)(p.c,{label:"Beta "+(y?"(rad)":"(deg)"),value:m,onChange:e=>C(e),min:0,max:y?Math.PI:180,step:y?.1:5}),(0,s.jsx)(b.r,{label:"Use Radians",value:y,onChange:e=>v(e)}),(0,s.jsx)(d.$,{appearance:"primary",onClick:ae,label:"Create"})]})]}),(0,s.jsxs)(j,{children:[(0,s.jsx)(d.$,{onClick:se,label:"Universal Camera"}),(0,s.jsxs)(x,{children:[(0,s.jsx)(u.F,{label:"Name",value:k,onChange:e=>f(e)}),(0,s.jsx)(N.We,{label:"Position",value:P,onChange:e=>_(e)}),(0,s.jsx)(d.$,{appearance:"primary",onClick:se,label:"Create"})]})]}),(0,s.jsxs)(j,{children:[(0,s.jsx)(d.$,{onClick:ie,label:"Free Camera"}),(0,s.jsxs)(x,{children:[(0,s.jsx)(u.F,{label:"Name",value:S,onChange:e=>w(e)}),(0,s.jsx)(N.We,{label:"Position",value:F,onChange:e=>M(e)}),(0,s.jsx)(d.$,{appearance:"primary",onClick:ie,label:"Create"})]})]}),(0,s.jsxs)(j,{children:[(0,s.jsx)(d.$,{onClick:ne,label:"Follow Camera"}),(0,s.jsxs)(x,{children:[(0,s.jsx)(u.F,{label:"Name",value:D,onChange:e=>$(e)}),(0,s.jsx)(N.We,{label:"Position",value:L,onChange:e=>K(e)}),(0,s.jsx)(p.c,{label:"Radius",value:E,onChange:e=>A(e),min:.1,max:1e3,step:.5}),(0,s.jsx)(p.c,{label:"Height Offset",value:G,onChange:e=>U(e),min:-100,max:100,step:.5}),(0,s.jsx)(p.c,{label:"Rotation Offset (deg)",value:q,onChange:e=>Z(e),min:-180,max:180,step:5}),(0,s.jsx)(d.$,{appearance:"primary",onClick:ne,label:"Create"})]})]}),(0,s.jsxs)(j,{children:[(0,s.jsx)(d.$,{onClick:le,label:"Fly Camera"}),(0,s.jsxs)(x,{children:[(0,s.jsx)(u.F,{label:"Name",value:Y,onChange:e=>W(e)}),(0,s.jsx)(N.We,{label:"Position",value:X,onChange:e=>z(e)}),(0,s.jsx)(d.$,{appearance:"primary",onClick:le,label:"Create"})]})]}),(0,s.jsxs)(j,{children:[(0,s.jsx)(d.$,{onClick:re,label:"Geospatial Camera"}),(0,s.jsxs)(x,{children:[(0,s.jsx)(u.F,{label:"Name",value:H,onChange:e=>J(e)}),(0,s.jsx)(p.c,{label:"Planet Radius (m)",value:ee,onChange:e=>te(e),min:1e3,max:1e8,step:1e3}),(0,s.jsx)(d.$,{appearance:"primary",onClick:re,label:"Create"})]})]})]})};var ee=a(58484),te=a(1612),ae=a(32186),se=a(14491);const ie=({scene:e})=>{const[t,i]=(0,h.useState)("Particle System"),[n,l]=(0,h.useState)(2e3),[r,o]=(0,h.useState)("GPU Particle System"),[c,m]=(0,h.useState)(2e3),[C,b]=(0,h.useState)("Node Particle System"),[y,v]=(0,h.useState)(""),k=()=>{setTimeout((()=>{const a=new ee.o(t,n,e);a.particleTexture=new se.g("https://assets.babylonjs.com/textures/flare.png",e),a.start()}),0)},f=()=>{te.A.IsSupported?setTimeout((()=>{const t=new te.A(r,{capacity:c},e);t.particleTexture=new se.g("https://assets.babylonjs.com/textures/flare.png",e),t.start()}),0):alert("GPU Particle System is not supported.")},P=async()=>{try{let t;const a=y.trim();a?(t=await ae.M.ParseFromSnippetAsync(a),t.name=C):t=ae.M.CreateDefault(C);const s=await t.buildAsync(e);for(const e of s.systems)e.name=C;s.start()}catch(e){a.g.console.error("Error creating Node Particle System:",e),alert("Failed to create Node Particle System: "+e)}};return(0,s.jsxs)(g,{children:[(0,s.jsxs)(j,{children:[(0,s.jsx)(d.$,{onClick:k,label:"CPU Particle System"}),(0,s.jsxs)(x,{children:[(0,s.jsx)(u.F,{label:"Name",value:t,onChange:e=>i(e)}),(0,s.jsx)(p.c,{label:"Capacity",value:n,onChange:e=>l(e),min:1,max:1e5,step:100}),(0,s.jsx)(d.$,{appearance:"primary",onClick:k,label:"Create"})]})]}),(0,s.jsxs)(j,{children:[(0,s.jsx)(d.$,{onClick:f,label:"GPU Particle System"}),(0,s.jsxs)(x,{children:[(0,s.jsx)(u.F,{label:"Name",value:r,onChange:e=>o(e)}),(0,s.jsx)(p.c,{label:"Capacity",value:c,onChange:e=>m(e),min:1,max:1e6,step:1e3}),(0,s.jsx)(d.$,{appearance:"primary",onClick:f,label:"Create"})]})]}),(0,s.jsxs)(j,{children:[(0,s.jsx)(d.$,{onClick:P,label:"Node Particle System"}),(0,s.jsxs)(x,{children:[(0,s.jsx)(u.F,{label:"Name",value:C,onChange:e=>b(e)}),(0,s.jsx)(u.F,{label:"Snippet ID",value:y,onChange:e=>v(e)}),(0,s.jsx)(d.$,{appearance:"primary",onClick:P,label:"Create"})]})]})]})};var ne=a(26114),le=a(11166),re=a(88932),oe=a(93473),ce=a(93258),he=a(85709),de=a(77269);const ue=(e,t)=>{const a=t.postProcessRenderPipelineManager.supportedPipelines,s=new Set(a.map((e=>e._name)));if(!s.has(e))return e;let i=1,n=`${e} ${i}`;for(;s.has(n);)i++,n=`${e} ${i}`;return n},pe=({scene:e})=>{const[t,a]=(0,h.useState)("Default rendering pipeline"),[i,n]=(0,h.useState)("SSAO rendering pipeline"),[l,r]=(0,h.useState)("SSAO2 rendering pipeline"),[o,c]=(0,h.useState)("SSR rendering pipeline"),[p,m]=(0,h.useState)("IBL Shadows rendering pipeline"),C=()=>{const a=ue(t,e);new le.e(a,!0,e,e.cameras)},b=()=>{const t=ue(i,e);new re.X(t,e,1,e.cameras)},y=()=>{const t=ue(l,e);new oe.L(t,e,1,e.cameras)},v=()=>{const t=ue(o,e);new ce.r(t,e,e.cameras)},k=()=>{const t=ue(p,e);new he.X(t,e,{},e.cameras)},f=e.getEngine().getCaps(),P=f.drawBuffersExtension,_=f.texelFetch,S=(0,de.NC)(e,"activeCamera");return(0,s.jsx)(g,{children:S?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(j,{children:[(0,s.jsx)(d.$,{onClick:C,label:"Default Pipeline"}),(0,s.jsxs)(x,{children:[(0,s.jsx)(u.F,{label:"Name",value:t,onChange:e=>a(e)}),(0,s.jsx)(d.$,{appearance:"primary",onClick:C,label:"Create"})]})]}),(0,s.jsxs)(j,{children:[(0,s.jsx)(d.$,{onClick:b,label:"SSAO Pipeline"}),(0,s.jsxs)(x,{children:[(0,s.jsx)(u.F,{label:"Name",value:i,onChange:e=>n(e)}),(0,s.jsx)(d.$,{appearance:"primary",onClick:b,label:"Create"})]})]}),P&&(0,s.jsxs)(j,{children:[(0,s.jsx)(d.$,{onClick:y,label:"SSAO2 Pipeline"}),(0,s.jsxs)(x,{children:[(0,s.jsx)(u.F,{label:"Name",value:l,onChange:e=>r(e)}),(0,s.jsx)(d.$,{appearance:"primary",onClick:y,label:"Create"})]})]}),P&&_&&(0,s.jsxs)(j,{children:[(0,s.jsx)(d.$,{onClick:v,label:"SSR Pipeline"}),(0,s.jsxs)(x,{children:[(0,s.jsx)(u.F,{label:"Name",value:o,onChange:e=>c(e)}),(0,s.jsx)(d.$,{appearance:"primary",onClick:v,label:"Create"})]})]}),P&&_&&(0,s.jsxs)(j,{children:[(0,s.jsx)(d.$,{onClick:k,label:"IBL Shadows Pipeline"}),(0,s.jsxs)(x,{children:[(0,s.jsx)(u.F,{label:"Name",value:p,onChange:e=>m(e)}),(0,s.jsx)(d.$,{appearance:"primary",onClick:k,label:"Create"})]})]})]}):(0,s.jsx)(ne.n,{message:"Cannot create rendering pipeline without an active camera.",title:"No active camera",intent:"info"})})};var me=a(32441);const Ce=({scene:e})=>{const[t,a]=(0,h.useState)("Frame Graph"),i=()=>{const a=function(e,t){let a=e,s=1;for(;t.getFrameGraphByName(a);)a=e+" "+s++;return a}(t,e),s=new me.t(a,e);s.setToDefault(),s.buildAsync()};return(0,s.jsx)(g,{children:(0,s.jsxs)(j,{children:[(0,s.jsx)(d.$,{onClick:i,label:"Frame Graph"}),(0,s.jsxs)(x,{children:[(0,s.jsx)(u.F,{label:"Name",value:t,onChange:e=>a(e)}),(0,s.jsx)(d.$,{appearance:"primary",onClick:i,label:"Create"})]})]})})};var xe=a(82178);const be=({scene:e})=>{const[t,a]=(0,h.useState)("Sprite Manager"),[i,n]=(0,h.useState)(500),[l,r]=(0,h.useState)(64),[o,c]=(0,h.useState)("https://assets.babylonjs.com/textures/player.png"),m=()=>{new xe.x(t,o,i,l,e)};return(0,s.jsx)(g,{children:(0,s.jsxs)(j,{children:[(0,s.jsx)(d.$,{onClick:m,label:"Sprite Manager"}),(0,s.jsxs)(x,{children:[(0,s.jsx)(u.F,{label:"Name",value:t,onChange:e=>a(e)}),(0,s.jsx)(u.F,{label:"Texture URL",value:o,onChange:e=>c(e)}),(0,s.jsx)(p.c,{label:"Capacity",value:i,onChange:e=>n(e),min:1,max:1e4,step:100}),(0,s.jsx)(p.c,{label:"Cell Size",value:l,onChange:e=>r(e),min:1,max:1024,step:1}),(0,s.jsx)(d.$,{appearance:"primary",onClick:m,label:"Create"})]})]})})},ye={friendlyName:"Creation Tools",consumes:[n.kQ,r.E],factory:(e,t)=>{const a=e.addSidePane({key:"Create",title:"Creation Tools",icon:l.tSli,horizontalLocation:"left",verticalLocation:"top",content:()=>{const e=(0,o.Cn)((()=>t.currentScene),t.currentSceneObservable);return e&&(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(i.nD,{children:[(0,s.jsx)(i.K_,{title:"Meshes",children:(0,s.jsx)(f,{scene:e})}),(0,s.jsx)(i.K_,{title:"Materials",children:(0,s.jsx)(w,{scene:e})}),(0,s.jsx)(i.K_,{title:"Lights",children:(0,s.jsx)($,{scene:e})}),(0,s.jsx)(i.K_,{title:"Particles",children:(0,s.jsx)(ie,{scene:e})}),(0,s.jsx)(i.K_,{title:"Cameras",children:(0,s.jsx)(J,{scene:e})}),(0,s.jsx)(i.K_,{title:"Rendering Pipelines",children:(0,s.jsx)(pe,{scene:e})}),(0,s.jsx)(i.K_,{title:"Frame Graphs",children:(0,s.jsx)(Ce,{scene:e})}),(0,s.jsx)(i.K_,{title:"Sprite Managers",children:(0,s.jsx)(be,{scene:e})})]})})}});return{dispose:()=>a.dispose()}}},ve={serviceDefinitions:[ye]}}}]);
//# sourceMappingURL=2784.bundle.js.map