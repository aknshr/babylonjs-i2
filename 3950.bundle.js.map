{"version":3,"file":"3950.bundle.js","mappings":"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","sources":["webpack://@dev/inspector-v2/../core/src/FlowGraph/Blocks/Data/flowGraphCachedOperationBlock.ts?","webpack://@dev/inspector-v2/../core/src/FlowGraph/Blocks/Data/Math/flowGraphMathCombineExtractBlocks.ts?"],"sourcesContent":["import type { Nullable } from \"../../../types\";\r\nimport type { IFlowGraphBlockConfiguration } from \"../../flowGraphBlock\";\r\nimport { FlowGraphBlock } from \"../../flowGraphBlock\";\r\nimport type { FlowGraphContext } from \"../../flowGraphContext\";\r\nimport type { FlowGraphDataConnection } from \"../../flowGraphDataConnection\";\r\nimport type { RichType } from \"../../flowGraphRichTypes\";\r\nimport { RichTypeBoolean } from \"../../flowGraphRichTypes\";\r\n\r\nconst CacheName = \"cachedOperationValue\";\r\nconst CacheExecIdName = \"cachedExecutionId\";\r\n\r\n/**\r\n * A block that will cache the result of an operation and deliver it as an output.\r\n */\r\nexport abstract class FlowGraphCachedOperationBlock<OutputT> extends FlowGraphBlock {\r\n    /**\r\n     * The output of the operation\r\n     */\r\n    public readonly value: FlowGraphDataConnection<OutputT>;\r\n\r\n    /**\r\n     * Output connection: Whether the value is valid.\r\n     */\r\n    public readonly isValid: FlowGraphDataConnection<boolean>;\r\n\r\n    constructor(outputRichType: RichType<OutputT>, config?: IFlowGraphBlockConfiguration) {\r\n        super(config);\r\n\r\n        this.value = this.registerDataOutput(\"value\", outputRichType);\r\n        this.isValid = this.registerDataOutput(\"isValid\", RichTypeBoolean);\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     * Operation to realize\r\n     * @param context the graph context\r\n     */\r\n    public abstract _doOperation(context: FlowGraphContext): OutputT | undefined;\r\n\r\n    public override _updateOutputs(context: FlowGraphContext) {\r\n        const cachedExecutionId = context._getExecutionVariable(this, CacheExecIdName, -1);\r\n        const cachedValue = context._getExecutionVariable<Nullable<OutputT>>(this, CacheName, null);\r\n        if (cachedValue !== undefined && cachedValue !== null && cachedExecutionId === context.executionId) {\r\n            this.isValid.setValue(true, context);\r\n            this.value.setValue(cachedValue, context);\r\n        } else {\r\n            try {\r\n                const calculatedValue = this._doOperation(context);\r\n                if (calculatedValue === undefined || calculatedValue === null) {\r\n                    this.isValid.setValue(false, context);\r\n                    return;\r\n                }\r\n                context._setExecutionVariable(this, CacheName, calculatedValue);\r\n                context._setExecutionVariable(this, CacheExecIdName, context.executionId);\r\n                this.value.setValue(calculatedValue, context);\r\n                this.isValid.setValue(true, context);\r\n            } catch (e) {\r\n                this.isValid.setValue(false, context);\r\n            }\r\n        }\r\n    }\r\n}\r\n","import type { FlowGraphContext } from \"core/FlowGraph/flowGraphContext\";\nimport { FlowGraphCachedOperationBlock } from \"../flowGraphCachedOperationBlock\";\nimport {\n    RichTypeMatrix,\n    RichTypeMatrix2D,\n    RichTypeMatrix3D,\n    RichTypeNumber,\n    RichTypeVector2,\n    RichTypeVector3,\n    RichTypeVector4,\n    type RichType,\n} from \"core/FlowGraph/flowGraphRichTypes\";\nimport { FlowGraphBlock, type IFlowGraphBlockConfiguration } from \"core/FlowGraph/flowGraphBlock\";\nimport { Matrix, Vector2, Vector3, Vector4 } from \"core/Maths/math.vector\";\nimport type { Nullable } from \"core/types\";\nimport { FlowGraphBlockNames } from \"../../flowGraphBlockNames\";\nimport { RegisterClass } from \"core/Misc/typeStore\";\nimport { FlowGraphMatrix2D, FlowGraphMatrix3D } from \"core/FlowGraph/CustomTypes/flowGraphMatrix\";\n\nabstract class FlowGraphMathCombineBlock<ResultT> extends FlowGraphCachedOperationBlock<ResultT> {\n    /**\n     * Base class for blocks that combine multiple numeric inputs into a single result.\n     * Handles registering data inputs and managing cached outputs.\n     * @param numberOfInputs The number of input values to combine.\n     * @param type The type of the result.\n     * @param config The block configuration.\n     */\n    constructor(numberOfInputs: number, type: RichType<ResultT>, config?: IFlowGraphBlockConfiguration) {\n        super(type, config);\n        for (let i = 0; i < numberOfInputs; i++) {\n            this.registerDataInput(`input_${i}`, RichTypeNumber, 0);\n        }\n    }\n}\n\n/**\n * Abstract class representing a flow graph block that extracts multiple outputs from a single input.\n */\nabstract class FlowGraphMathExtractBlock<InputT> extends FlowGraphBlock {\n    /**\n     * Creates an instance of FlowGraphMathExtractBlock.\n     *\n     * @param numberOfOutputs - The number of outputs to be extracted from the input.\n     * @param type - The type of the input data.\n     * @param config - Optional configuration for the flow graph block.\n     */\n    constructor(numberOfOutputs: number, type: RichType<InputT>, config?: IFlowGraphBlockConfiguration) {\n        super(config);\n        this.registerDataInput(\"input\", type);\n        for (let i = 0; i < numberOfOutputs; i++) {\n            this.registerDataOutput(`output_${i}`, RichTypeNumber, 0);\n        }\n    }\n}\n/**\n * Combines two floats into a new Vector2\n */\nexport class FlowGraphCombineVector2Block extends FlowGraphMathCombineBlock<Vector2> {\n    constructor(config?: IFlowGraphBlockConfiguration) {\n        super(2, RichTypeVector2, config);\n    }\n\n    /**\n     * @internal\n     * Combines two floats into a new Vector2\n     */\n    public override _doOperation(context: FlowGraphContext): Vector2 {\n        if (!context._hasExecutionVariable(this, \"cachedVector\")) {\n            context._setExecutionVariable(this, \"cachedVector\", new Vector2());\n        }\n        const vector = context._getExecutionVariable<Nullable<Vector2>>(this, \"cachedVector\", null) as Vector2;\n        vector.set(this.getDataInput(\"input_0\")!.getValue(context), this.getDataInput(\"input_1\")!.getValue(context));\n        return vector;\n    }\n\n    public override getClassName(): string {\n        return FlowGraphBlockNames.CombineVector2;\n    }\n}\n\nRegisterClass(FlowGraphBlockNames.CombineVector2, FlowGraphCombineVector2Block);\n\n/**\n * Combines three floats into a new Vector3\n */\nexport class FlowGraphCombineVector3Block extends FlowGraphMathCombineBlock<Vector3> {\n    constructor(config?: IFlowGraphBlockConfiguration) {\n        super(3, RichTypeVector3, config);\n    }\n\n    public override _doOperation(context: FlowGraphContext): Vector3 {\n        if (!context._hasExecutionVariable(this, \"cachedVector\")) {\n            context._setExecutionVariable(this, \"cachedVector\", new Vector3());\n        }\n        const vector = context._getExecutionVariable<Nullable<Vector3>>(this, \"cachedVector\", null) as Vector3;\n        vector.set(this.getDataInput(\"input_0\")!.getValue(context), this.getDataInput(\"input_1\")!.getValue(context), this.getDataInput(\"input_2\")!.getValue(context));\n        return vector;\n    }\n\n    public override getClassName(): string {\n        return FlowGraphBlockNames.CombineVector3;\n    }\n}\n\nRegisterClass(FlowGraphBlockNames.CombineVector3, FlowGraphCombineVector3Block);\n\n/**\n * Combines four floats into a new Vector4\n */\nexport class FlowGraphCombineVector4Block extends FlowGraphMathCombineBlock<Vector4> {\n    constructor(config?: IFlowGraphBlockConfiguration) {\n        super(4, RichTypeVector4, config);\n    }\n\n    public override _doOperation(context: FlowGraphContext): Vector4 {\n        if (!context._hasExecutionVariable(this, \"cachedVector\")) {\n            context._setExecutionVariable(this, \"cachedVector\", new Vector4());\n        }\n        const vector = context._getExecutionVariable<Nullable<Vector4>>(this, \"cachedVector\", null) as Vector4;\n        vector.set(\n            this.getDataInput(\"input_0\")!.getValue(context),\n            this.getDataInput(\"input_1\")!.getValue(context),\n            this.getDataInput(\"input_2\")!.getValue(context),\n            this.getDataInput(\"input_3\")!.getValue(context)\n        );\n        return vector;\n    }\n\n    public override getClassName(): string {\n        return FlowGraphBlockNames.CombineVector4;\n    }\n}\n\nRegisterClass(FlowGraphBlockNames.CombineVector4, FlowGraphCombineVector4Block);\n\n/**\n * Configuration for the matrix combine blocks.\n */\nexport interface IFlowGraphCombineMatrixBlockConfiguration extends IFlowGraphBlockConfiguration {\n    /**\n     * Whether the input is in column-major order. Default is false.\n     * Note - Babylon's matrix is the same as WebGL's. So unless your matrix requires transformation, you should leave this as false.\n     */\n    inputIsColumnMajor?: boolean;\n}\n\n/**\n * Combines 16 floats into a new Matrix\n *\n * Note that glTF interactivity's combine4x4 uses column-major order, while Babylon.js uses row-major order.\n */\nexport class FlowGraphCombineMatrixBlock extends FlowGraphMathCombineBlock<Matrix> {\n    constructor(config?: IFlowGraphCombineMatrixBlockConfiguration) {\n        super(16, RichTypeMatrix, config);\n    }\n\n    public override _doOperation(context: FlowGraphContext): Matrix {\n        if (!context._hasExecutionVariable(this, \"cachedMatrix\")) {\n            context._setExecutionVariable(this, \"cachedMatrix\", new Matrix());\n        }\n        const matrix = context._getExecutionVariable<Nullable<Matrix>>(this, \"cachedMatrix\", null) as Matrix;\n        if (this.config?.inputIsColumnMajor) {\n            matrix.set(\n                this.getDataInput(\"input_0\")!.getValue(context),\n                this.getDataInput(\"input_4\")!.getValue(context),\n                this.getDataInput(\"input_8\")!.getValue(context),\n                this.getDataInput(\"input_12\")!.getValue(context),\n                this.getDataInput(\"input_1\")!.getValue(context),\n                this.getDataInput(\"input_5\")!.getValue(context),\n                this.getDataInput(\"input_9\")!.getValue(context),\n                this.getDataInput(\"input_13\")!.getValue(context),\n                this.getDataInput(\"input_2\")!.getValue(context),\n                this.getDataInput(\"input_6\")!.getValue(context),\n                this.getDataInput(\"input_10\")!.getValue(context),\n                this.getDataInput(\"input_14\")!.getValue(context),\n                this.getDataInput(\"input_3\")!.getValue(context),\n                this.getDataInput(\"input_7\")!.getValue(context),\n                this.getDataInput(\"input_11\")!.getValue(context),\n                this.getDataInput(\"input_15\")!.getValue(context)\n            );\n        } else {\n            matrix.set(\n                this.getDataInput(\"input_0\")!.getValue(context),\n                this.getDataInput(\"input_1\")!.getValue(context),\n                this.getDataInput(\"input_2\")!.getValue(context),\n                this.getDataInput(\"input_3\")!.getValue(context),\n                this.getDataInput(\"input_4\")!.getValue(context),\n                this.getDataInput(\"input_5\")!.getValue(context),\n                this.getDataInput(\"input_6\")!.getValue(context),\n                this.getDataInput(\"input_7\")!.getValue(context),\n                this.getDataInput(\"input_8\")!.getValue(context),\n                this.getDataInput(\"input_9\")!.getValue(context),\n                this.getDataInput(\"input_10\")!.getValue(context),\n                this.getDataInput(\"input_11\")!.getValue(context),\n                this.getDataInput(\"input_12\")!.getValue(context),\n                this.getDataInput(\"input_13\")!.getValue(context),\n                this.getDataInput(\"input_14\")!.getValue(context),\n                this.getDataInput(\"input_15\")!.getValue(context)\n            );\n        }\n        return matrix;\n    }\n\n    public override getClassName(): string {\n        return FlowGraphBlockNames.CombineMatrix;\n    }\n}\n\nRegisterClass(FlowGraphBlockNames.CombineMatrix, FlowGraphCombineMatrixBlock);\n\n/**\n * Combines 4 floats into a new Matrix\n */\nexport class FlowGraphCombineMatrix2DBlock extends FlowGraphMathCombineBlock<FlowGraphMatrix2D> {\n    constructor(config?: IFlowGraphCombineMatrixBlockConfiguration) {\n        super(4, RichTypeMatrix2D, config);\n    }\n\n    public override _doOperation(context: FlowGraphContext): FlowGraphMatrix2D {\n        if (!context._hasExecutionVariable(this, \"cachedMatrix\")) {\n            context._setExecutionVariable(this, \"cachedMatrix\", new FlowGraphMatrix2D());\n        }\n        const matrix = context._getExecutionVariable<Nullable<FlowGraphMatrix2D>>(this, \"cachedMatrix\", null) as FlowGraphMatrix2D;\n        const array = this.config?.inputIsColumnMajor\n            ? [\n                  // column to row-major\n                  this.getDataInput(\"input_0\")!.getValue(context),\n                  this.getDataInput(\"input_2\")!.getValue(context),\n                  this.getDataInput(\"input_1\")!.getValue(context),\n                  this.getDataInput(\"input_3\")!.getValue(context),\n              ]\n            : [\n                  this.getDataInput(\"input_0\")!.getValue(context),\n                  this.getDataInput(\"input_1\")!.getValue(context),\n                  this.getDataInput(\"input_2\")!.getValue(context),\n                  this.getDataInput(\"input_3\")!.getValue(context),\n              ];\n        matrix.fromArray(array);\n        return matrix;\n    }\n\n    public override getClassName(): string {\n        return FlowGraphBlockNames.CombineMatrix2D;\n    }\n}\n\nRegisterClass(FlowGraphBlockNames.CombineMatrix2D, FlowGraphCombineMatrix2DBlock);\n\n/**\n * Combines 9 floats into a new Matrix3D\n */\nexport class FlowGraphCombineMatrix3DBlock extends FlowGraphMathCombineBlock<FlowGraphMatrix3D> {\n    constructor(config?: IFlowGraphCombineMatrixBlockConfiguration) {\n        super(9, RichTypeMatrix3D, config);\n    }\n\n    public override _doOperation(context: FlowGraphContext): FlowGraphMatrix3D {\n        if (!context._hasExecutionVariable(this, \"cachedMatrix\")) {\n            context._setExecutionVariable(this, \"cachedMatrix\", new FlowGraphMatrix3D());\n        }\n        const matrix = context._getExecutionVariable<Nullable<FlowGraphMatrix3D>>(this, \"cachedMatrix\", null) as FlowGraphMatrix3D;\n        const array = this.config?.inputIsColumnMajor\n            ? [\n                  // column to row major\n                  this.getDataInput(\"input_0\")!.getValue(context),\n                  this.getDataInput(\"input_3\")!.getValue(context),\n                  this.getDataInput(\"input_6\")!.getValue(context),\n                  this.getDataInput(\"input_1\")!.getValue(context),\n                  this.getDataInput(\"input_4\")!.getValue(context),\n                  this.getDataInput(\"input_7\")!.getValue(context),\n                  this.getDataInput(\"input_2\")!.getValue(context),\n                  this.getDataInput(\"input_5\")!.getValue(context),\n                  this.getDataInput(\"input_8\")!.getValue(context),\n              ]\n            : [\n                  this.getDataInput(\"input_0\")!.getValue(context),\n                  this.getDataInput(\"input_1\")!.getValue(context),\n                  this.getDataInput(\"input_2\")!.getValue(context),\n                  this.getDataInput(\"input_3\")!.getValue(context),\n                  this.getDataInput(\"input_4\")!.getValue(context),\n                  this.getDataInput(\"input_5\")!.getValue(context),\n                  this.getDataInput(\"input_6\")!.getValue(context),\n                  this.getDataInput(\"input_7\")!.getValue(context),\n                  this.getDataInput(\"input_8\")!.getValue(context),\n              ];\n        matrix.fromArray(array);\n        return matrix;\n    }\n\n    public override getClassName(): string {\n        return FlowGraphBlockNames.CombineMatrix3D;\n    }\n}\n\nRegisterClass(FlowGraphBlockNames.CombineMatrix3D, FlowGraphCombineMatrix3DBlock);\n\n/**\n * Extracts two floats from a Vector2\n */\nexport class FlowGraphExtractVector2Block extends FlowGraphMathExtractBlock<Vector2> {\n    constructor(config?: IFlowGraphBlockConfiguration) {\n        super(2, RichTypeVector2, config);\n    }\n\n    public override _updateOutputs(context: FlowGraphContext): void {\n        let input = this.getDataInput(\"input\")?.getValue(context) as Vector2;\n        if (!input) {\n            input = Vector2.Zero();\n            this.getDataInput(\"input\")!.setValue(input, context);\n        }\n        this.getDataOutput(\"output_0\")!.setValue(input.x, context);\n        this.getDataOutput(\"output_1\")!.setValue(input.y, context);\n    }\n\n    public override getClassName(): string {\n        return FlowGraphBlockNames.ExtractVector2;\n    }\n}\n\nRegisterClass(FlowGraphBlockNames.ExtractVector2, FlowGraphExtractVector2Block);\n\n/**\n * Extracts three floats from a Vector3\n */\nexport class FlowGraphExtractVector3Block extends FlowGraphMathExtractBlock<Vector3> {\n    constructor(config?: IFlowGraphBlockConfiguration) {\n        super(3, RichTypeVector3, config);\n    }\n    public override _updateOutputs(context: FlowGraphContext): void {\n        let input = this.getDataInput(\"input\")?.getValue(context) as Vector3;\n        if (!input) {\n            input = Vector3.Zero();\n            this.getDataInput(\"input\")!.setValue(input, context);\n        }\n        this.getDataOutput(\"output_0\")!.setValue(input.x, context);\n        this.getDataOutput(\"output_1\")!.setValue(input.y, context);\n        this.getDataOutput(\"output_2\")!.setValue(input.z, context);\n    }\n\n    public override getClassName(): string {\n        return FlowGraphBlockNames.ExtractVector3;\n    }\n}\n\nRegisterClass(FlowGraphBlockNames.ExtractVector3, FlowGraphExtractVector3Block);\n\n/**\n * Extracts four floats from a Vector4\n */\nexport class FlowGraphExtractVector4Block extends FlowGraphMathExtractBlock<Vector4> {\n    constructor(config?: IFlowGraphBlockConfiguration) {\n        super(4, RichTypeVector4, config);\n    }\n    public override _updateOutputs(context: FlowGraphContext): void {\n        let input = this.getDataInput(\"input\")?.getValue(context) as Vector4;\n        if (!input) {\n            input = Vector4.Zero();\n            this.getDataInput(\"input\")!.setValue(input, context);\n        }\n        this.getDataOutput(\"output_0\")!.setValue(input.x, context);\n        this.getDataOutput(\"output_1\")!.setValue(input.y, context);\n        this.getDataOutput(\"output_2\")!.setValue(input.z, context);\n        this.getDataOutput(\"output_3\")!.setValue(input.w, context);\n    }\n\n    public override getClassName(): string {\n        return FlowGraphBlockNames.ExtractVector4;\n    }\n}\n\nRegisterClass(FlowGraphBlockNames.ExtractVector4, FlowGraphExtractVector4Block);\n\n/**\n * Extracts 16 floats from a Matrix\n */\nexport class FlowGraphExtractMatrixBlock extends FlowGraphMathExtractBlock<Matrix> {\n    constructor(config?: IFlowGraphBlockConfiguration) {\n        super(16, RichTypeMatrix, config);\n    }\n    public override _updateOutputs(context: FlowGraphContext): void {\n        let input = this.getDataInput(\"input\")?.getValue(context) as Matrix;\n        if (!input) {\n            input = Matrix.Identity();\n            this.getDataInput(\"input\")!.setValue(input, context);\n        }\n        for (let i = 0; i < 16; i++) {\n            this.getDataOutput(`output_${i}`)!.setValue(input.m[i], context);\n        }\n    }\n\n    public override getClassName(): string {\n        return FlowGraphBlockNames.ExtractMatrix;\n    }\n}\n\nRegisterClass(FlowGraphBlockNames.ExtractMatrix, FlowGraphExtractMatrixBlock);\n\n/**\n * Extracts 4 floats from a Matrix2D\n */\nexport class FlowGraphExtractMatrix2DBlock extends FlowGraphMathExtractBlock<FlowGraphMatrix2D> {\n    constructor(config?: IFlowGraphBlockConfiguration) {\n        super(4, RichTypeMatrix2D, config);\n    }\n    public override _updateOutputs(context: FlowGraphContext): void {\n        let input = this.getDataInput(\"input\")?.getValue(context) as FlowGraphMatrix2D;\n        if (!input) {\n            input = new FlowGraphMatrix2D();\n            this.getDataInput(\"input\")!.setValue(input, context);\n        }\n        for (let i = 0; i < 4; i++) {\n            this.getDataOutput(`output_${i}`)!.setValue(input.m[i], context);\n        }\n    }\n\n    public override getClassName(): string {\n        return FlowGraphBlockNames.ExtractMatrix2D;\n    }\n}\n\nRegisterClass(FlowGraphBlockNames.ExtractMatrix2D, FlowGraphExtractMatrix2DBlock);\n\n/**\n * Extracts 4 floats from a Matrix2D\n */\nexport class FlowGraphExtractMatrix3DBlock extends FlowGraphMathExtractBlock<FlowGraphMatrix3D> {\n    constructor(config?: IFlowGraphBlockConfiguration) {\n        super(9, RichTypeMatrix3D, config);\n    }\n    public override _updateOutputs(context: FlowGraphContext): void {\n        let input = this.getDataInput(\"input\")?.getValue(context) as FlowGraphMatrix3D;\n        if (!input) {\n            input = new FlowGraphMatrix3D();\n            this.getDataInput(\"input\")!.setValue(input, context);\n        }\n        for (let i = 0; i < 9; i++) {\n            this.getDataOutput(`output_${i}`)!.setValue(input.m[i], context);\n        }\n    }\n\n    public override getClassName(): string {\n        return FlowGraphBlockNames.ExtractMatrix3D;\n    }\n}\n\nRegisterClass(FlowGraphBlockNames.ExtractMatrix3D, FlowGraphExtractMatrix3DBlock);\n"],"names":["CacheName","CacheExecIdName","FlowGraphCachedOperationBlock","constructor","outputRichType","config","super","this","value","registerDataOutput","isValid","_updateOutputs","context","cachedExecutionId","_getExecutionVariable","cachedValue","executionId","setValue","calculatedValue","_doOperation","_setExecutionVariable","e","FlowGraphMathCombineBlock","numberOfInputs","type","i","registerDataInput","FlowGraphMathExtractBlock","numberOfOutputs","FlowGraphCombineVector2Block","_hasExecutionVariable","vector","set","getDataInput","getValue","getClassName","FlowGraphCombineVector3Block","FlowGraphCombineVector4Block","FlowGraphCombineMatrixBlock","matrix","inputIsColumnMajor","FlowGraphCombineMatrix2DBlock","array","fromArray","FlowGraphCombineMatrix3DBlock","FlowGraphExtractVector2Block","input","Zero","getDataOutput","x","y","FlowGraphExtractVector3Block","z","FlowGraphExtractVector4Block","w","FlowGraphExtractMatrixBlock","Identity","m","FlowGraphExtractMatrix2DBlock","FlowGraphExtractMatrix3DBlock"],"ignoreList":[],"sourceRoot":""}