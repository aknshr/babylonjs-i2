"use strict";(self.webpackChunk_dev_inspector_v2=self.webpackChunk_dev_inspector_v2||[]).push([[135],{30135:(t,e,n)=>{n.r(e),n.d(e,{FlowGraphStopAnimationBlock:()=>r});var i=n(41862),o=n(72062),a=n(83031),s=n(85858);class r extends s.M{constructor(t){super(t),this.animationGroup=this.registerDataInput("animationGroup",i.Vv),this.stopAtFrame=this.registerDataInput("stopAtFrame",i.Es,-1)}_preparePendingTasks(t){const e=this.animationGroup.getValue(t),n=this.stopAtFrame.getValue(t)??-1,i=t._getGlobalContextVariable("pendingStopAnimations",[]);i.push({uniqueId:e.uniqueId,stopAtFrame:n}),t._setGlobalContextVariable("pendingStopAnimations",i)}_cancelPendingTasks(t){const e=this.animationGroup.getValue(t),n=t._getGlobalContextVariable("pendingStopAnimations",[]);for(let i=0;i<n.length;i++)if(n[i].uniqueId===e.uniqueId){n.splice(i,1),t._setGlobalContextVariable("pendingStopAnimations",n);break}}_execute(t){const e=this.animationGroup.getValue(t),n=this.stopAtFrame.getValue(t)??-1;return e?isNaN(n)?this._reportError(t,"Invalid stop time."):(n>0?this._startPendingTasks(t):this._stopAnimation(e,t),void this.out._activateSignal(t)):(a.V.Warn("No animation group provided to stop."),this._reportError(t,"No animation group provided to stop."))}_executeOnTick(t){const e=this.animationGroup.getValue(t),n=t._getGlobalContextVariable("pendingStopAnimations",[]);for(let i=0;i<n.length;i++)if(n[i].uniqueId===e.uniqueId&&e.getCurrentFrame()>=n[i].stopAtFrame){this._stopAnimation(e,t),n.splice(i,1),t._setGlobalContextVariable("pendingStopAnimations",n),this.done._activateSignal(t),t._removePendingBlock(this);break}}getClassName(){return"FlowGraphStopAnimationBlock"}_stopAnimation(t,e){const n=e._getGlobalContextVariable("currentlyRunningAnimationGroups",[]),i=n.indexOf(t.uniqueId);-1!==i&&(t.stop(),n.splice(i,1),e._setGlobalContextVariable("currentlyRunningAnimationGroups",n))}}(0,o.Y5)("FlowGraphStopAnimationBlock",r)}}]);
//# sourceMappingURL=135.bundle.js.map