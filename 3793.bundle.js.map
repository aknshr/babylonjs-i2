{"version":3,"file":"3793.bundle.js","mappings":"iKAQA,MAAMA,EAAY,uBACZC,EAAkB,oBAKjB,MAAeC,UAA+C,IAWjE,WAAAC,CAAYC,EAAmCC,GAC3CC,MAAMD,GAENE,KAAKC,MAAQD,KAAKE,mBAAmB,QAASL,GAC9CG,KAAKG,QAAUH,KAAKE,mBAAmB,UAAW,KACtD,CASgB,cAAAE,CAAeC,GAC3B,MAAMC,EAAoBD,EAAQE,sBAAsBP,KAAMN,GAAkB,GAC1Ec,EAAcH,EAAQE,sBAAyCP,KAAMP,EAAW,MACtF,GAAIe,SAAqDF,IAAsBD,EAAQI,YACnFT,KAAKG,QAAQO,UAAS,EAAML,GAC5BL,KAAKC,MAAMS,SAASF,EAAaH,QAEjC,IACI,MAAMM,EAAkBX,KAAKY,aAAaP,GAC1C,GAAIM,QAEA,YADAX,KAAKG,QAAQO,UAAS,EAAOL,GAGjCA,EAAQQ,sBAAsBb,KAAMP,EAAWkB,GAC/CN,EAAQQ,sBAAsBb,KAAMN,EAAiBW,EAAQI,aAC7DT,KAAKC,MAAMS,SAASC,EAAiBN,GACrCL,KAAKG,QAAQO,UAAS,EAAML,EAChC,CAAE,MAAOS,GACLd,KAAKG,QAAQO,UAAS,EAAOL,EACjC,CAER,E,iDClDG,MAAMU,UAAsD,IAM/D,WAAAnB,CACIoB,EACAC,EACQC,EACAC,EACRrB,GAEAC,MAAMkB,EAAgBnB,GAJd,KAAAoB,WAAAA,EACA,KAAAC,WAAAA,EAIRnB,KAAKoB,EAAIpB,KAAKqB,kBAAkB,IAAKL,EACzC,CAOgB,YAAAJ,CAAaP,GACzB,OAAOL,KAAKkB,WAAWlB,KAAKoB,EAAEE,SAASjB,GAC3C,CAMgB,YAAAkB,GACZ,OAAOvB,KAAKmB,UAChB,E,sTCTG,MAAMK,UAAgC,IAKzC,WAAA5B,CAAYE,GACRC,OACI,QAA2BD,GAAQ2B,YAAc,WACjD,QAA2B3B,GAAQ2B,YAAc,WAChDL,GAAOA,EAAEM,UAAYN,EAAEM,YAAc,KAAOC,UAAUP,IAAa,0BAEpEtB,EAER,GAEJ,QAAc,0BAA+B0B,GAKtC,MAAMI,UAAkC,IAK3C,WAAAhC,CAAYE,GACRC,OAAM,QAA2BD,GAAQ2B,YAAc,UAAwB,MAAiBL,GAAMA,EAAES,eAAe,4BAAiC/B,EAC5J,GAEJ,QAAc,4BAAiC8B,GAKxC,MAAME,UAAmC,IAK5C,WAAAlC,CAAYE,GACRC,OACI,QAA2BD,GAAQ2B,YAAc,WACjD,QAA2B3B,GAAQ2B,YAAc,WAChDL,GAAQA,EAAwBW,QAAWX,EAAwBW,UAAY,KAAOC,OAAOZ,IAAa,6BAE3GtB,EAER,GAEJ,QAAc,6BAAkCgC,GAKzC,MAAMG,UAA2C,IAMpD,WAAArC,CAAYE,GACRC,OACI,QAA2BD,GAAQ2B,YAAc,WACjD,QAA2B3B,GAAQ2B,YAAc,WACjD,QAA2B3B,GAAQ2B,YAAc,WACjD,CAACL,EAAGc,IAAMA,EAAEC,SAASf,IAAS,qCAE9BtB,EAER,GAEJ,QAAc,qCAA0CmC,GAKjD,MAAMG,UAAsC,IAwB/C,WAAAxC,CAAYE,GACRC,MAAMD,GACNE,KAAKqC,MAAQrC,KAAKqB,kBAAkB,QAAS,MAC7CrB,KAAKsC,SAAWtC,KAAKE,mBAAmB,WAAY,MACpDF,KAAKuC,mBAAqBvC,KAAKE,mBAAmB,qBAAsB,MACxEF,KAAKwC,QAAUxC,KAAKE,mBAAmB,UAAW,MAClDF,KAAKG,QAAUH,KAAKE,mBAAmB,UAAW,MAAiB,EACvE,CAEgB,cAAAE,CAAeC,GAC3B,MAAMC,EAAoBD,EAAQE,sBAAsBP,KAAM,eAAgB,GACxEyC,EAAiBpC,EAAQE,sBAAsBP,KAAM,iBAAkB,MACvE0C,EAAiBrC,EAAQE,sBAAsBP,KAAM,iBAAkB,MACvE2C,EAAgBtC,EAAQE,sBAAsBP,KAAM,gBAAiB,MAC3E,GAAIM,IAAsBD,EAAQI,aAAegC,GAAkBC,GAAkBC,EACjF3C,KAAKsC,SAAS5B,SAAS+B,EAAgBpC,GACvCL,KAAKuC,mBAAmB7B,SAASgC,EAAgBrC,GACjDL,KAAKwC,QAAQ9B,SAASiC,EAAetC,OAClC,CACH,MAAMuC,EAAS5C,KAAKqC,MAAMf,SAASjB,GAC7BiC,EAAWG,GAAkB,IAAI,KACjCI,EAAWH,GAAkB,IAAI,KACjCF,EAAUG,GAAiB,IAAI,KAG/BG,EAAKC,KAAKC,MAAoB,IAAdJ,EAAOK,EAAE,IAAc,IACvCC,EAAKH,KAAKC,MAAoB,IAAdJ,EAAOK,EAAE,IAAc,IACvCE,EAAMJ,KAAKC,MAAqB,IAAfJ,EAAOK,EAAE,KAAe,IACzCG,EAAML,KAAKC,MAAqB,IAAfJ,EAAOK,EAAE,KAAe,IAC/C,GAAW,IAAPH,GAAmB,IAAPI,GAAoB,IAARC,GAAqB,IAARC,EAKrC,OAJApD,KAAKG,QAAQO,UAAS,EAAOL,GAC7BL,KAAKsC,SAAS5B,SAAS,KAAQ2C,OAAQhD,GACvCL,KAAKuC,mBAAmB7B,SAAS,KAAW4C,WAAYjD,QACxDL,KAAKwC,QAAQ9B,SAAS,KAAQ6C,MAAOlD,GAIzC,MAAMmD,EAAQZ,EAAOa,UAAUjB,EAASK,EAAUP,GAClDtC,KAAKG,QAAQO,SAAS8C,EAAOnD,GAC7BL,KAAKsC,SAAS5B,SAAS4B,EAAUjC,GACjCL,KAAKuC,mBAAmB7B,SAASmC,EAAUxC,GAC3CL,KAAKwC,QAAQ9B,SAAS8B,EAASnC,GAC/BA,EAAQQ,sBAAsBb,KAAM,iBAAkBsC,GACtDjC,EAAQQ,sBAAsBb,KAAM,iBAAkB6C,GACtDxC,EAAQQ,sBAAsBb,KAAM,gBAAiBwC,GACrDnC,EAAQQ,sBAAsBb,KAAM,cAAeK,EAAQI,YAC/D,CACJ,CAEgB,YAAAc,GACZ,MAAO,0BACX,GAGJ,QAAc,2BAAqCa,GAK5C,MAAMsB,UAAoC,IAkB7C,WAAA9D,CAAYE,GACRC,MAAMD,GACNE,KAAKsC,SAAWtC,KAAKqB,kBAAkB,WAAY,MACnDrB,KAAKuC,mBAAqBvC,KAAKqB,kBAAkB,qBAAsB,MACvErB,KAAKwC,QAAUxC,KAAKqB,kBAAkB,UAAW,MACjDrB,KAAKC,MAAQD,KAAKE,mBAAmB,QAAS,KAClD,CAEgB,cAAAE,CAAeC,GAC3B,MAAMC,EAAoBD,EAAQE,sBAAsBP,KAAM,eAAgB,GACxE2D,EAAetD,EAAQE,sBAAsBP,KAAM,eAAgB,MACzE,GAAIM,IAAsBD,EAAQI,aAAekD,EAC7C3D,KAAKC,MAAMS,SAASiD,EAActD,OAC/B,CACH,MAAMuC,EAAS,KAAOgB,QAAQ5D,KAAKwC,QAAQlB,SAASjB,GAAUL,KAAKuC,mBAAmBjB,SAASjB,GAAUL,KAAKsC,SAAShB,SAASjB,IAChIL,KAAKC,MAAMS,SAASkC,EAAQvC,GAC5BA,EAAQQ,sBAAsBb,KAAM,eAAgB4C,GACpDvC,EAAQQ,sBAAsBb,KAAM,cAAeK,EAAQI,YAC/D,CACJ,CAEgB,YAAAc,GACZ,MAAO,wBACX,GAGJ,QAAc,yBAAmCmC,E,iDCnO1C,MAAMG,UAA8D,IAUvE,WAAAjE,CACIkE,EACAC,EACA9C,EACQC,EACAC,EACRrB,GAEAC,MAAMkB,EAAgBnB,GAJd,KAAAoB,WAAAA,EACA,KAAAC,WAAAA,EAIRnB,KAAKoB,EAAIpB,KAAKqB,kBAAkB,IAAKyC,GACrC9D,KAAKkC,EAAIlC,KAAKqB,kBAAkB,IAAK0C,EACzC,CAOgB,YAAAnD,CAAaP,GACzB,MAAMe,EAAIpB,KAAKoB,EAAEE,SAASjB,GACpB6B,EAAIlC,KAAKkC,EAAEZ,SAASjB,GAC1B,OAAOL,KAAKkB,WAAWE,EAAGc,EAC9B,CAMgB,YAAAX,GACZ,OAAOvB,KAAKmB,UAChB,E","sources":["webpack://@dev/inspector-v2/../core/src/FlowGraph/Blocks/Data/flowGraphCachedOperationBlock.ts?","webpack://@dev/inspector-v2/../core/src/FlowGraph/Blocks/Data/flowGraphUnaryOperationBlock.ts?","webpack://@dev/inspector-v2/../core/src/FlowGraph/Blocks/Data/Math/flowGraphMatrixMathBlocks.ts?","webpack://@dev/inspector-v2/../core/src/FlowGraph/Blocks/Data/flowGraphBinaryOperationBlock.ts?"],"sourcesContent":["import type { Nullable } from \"../../../types\";\r\nimport type { IFlowGraphBlockConfiguration } from \"../../flowGraphBlock\";\r\nimport { FlowGraphBlock } from \"../../flowGraphBlock\";\r\nimport type { FlowGraphContext } from \"../../flowGraphContext\";\r\nimport type { FlowGraphDataConnection } from \"../../flowGraphDataConnection\";\r\nimport type { RichType } from \"../../flowGraphRichTypes\";\r\nimport { RichTypeBoolean } from \"../../flowGraphRichTypes\";\r\n\r\nconst CacheName = \"cachedOperationValue\";\r\nconst CacheExecIdName = \"cachedExecutionId\";\r\n\r\n/**\r\n * A block that will cache the result of an operation and deliver it as an output.\r\n */\r\nexport abstract class FlowGraphCachedOperationBlock<OutputT> extends FlowGraphBlock {\r\n    /**\r\n     * The output of the operation\r\n     */\r\n    public readonly value: FlowGraphDataConnection<OutputT>;\r\n\r\n    /**\r\n     * Output connection: Whether the value is valid.\r\n     */\r\n    public readonly isValid: FlowGraphDataConnection<boolean>;\r\n\r\n    constructor(outputRichType: RichType<OutputT>, config?: IFlowGraphBlockConfiguration) {\r\n        super(config);\r\n\r\n        this.value = this.registerDataOutput(\"value\", outputRichType);\r\n        this.isValid = this.registerDataOutput(\"isValid\", RichTypeBoolean);\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     * Operation to realize\r\n     * @param context the graph context\r\n     */\r\n    public abstract _doOperation(context: FlowGraphContext): OutputT | undefined;\r\n\r\n    public override _updateOutputs(context: FlowGraphContext) {\r\n        const cachedExecutionId = context._getExecutionVariable(this, CacheExecIdName, -1);\r\n        const cachedValue = context._getExecutionVariable<Nullable<OutputT>>(this, CacheName, null);\r\n        if (cachedValue !== undefined && cachedValue !== null && cachedExecutionId === context.executionId) {\r\n            this.isValid.setValue(true, context);\r\n            this.value.setValue(cachedValue, context);\r\n        } else {\r\n            try {\r\n                const calculatedValue = this._doOperation(context);\r\n                if (calculatedValue === undefined || calculatedValue === null) {\r\n                    this.isValid.setValue(false, context);\r\n                    return;\r\n                }\r\n                context._setExecutionVariable(this, CacheName, calculatedValue);\r\n                context._setExecutionVariable(this, CacheExecIdName, context.executionId);\r\n                this.value.setValue(calculatedValue, context);\r\n                this.isValid.setValue(true, context);\r\n            } catch (e) {\r\n                this.isValid.setValue(false, context);\r\n            }\r\n        }\r\n    }\r\n}\r\n","import type { FlowGraphDataConnection } from \"../../flowGraphDataConnection\";\r\nimport type { IFlowGraphBlockConfiguration } from \"../../flowGraphBlock\";\r\nimport type { RichType } from \"../../flowGraphRichTypes\";\r\nimport type { FlowGraphContext } from \"../../flowGraphContext\";\r\nimport { FlowGraphCachedOperationBlock } from \"./flowGraphCachedOperationBlock\";\r\n\r\n/**\r\n * @internal\r\n * The base block for all unary operation blocks. Receives an input of type InputT, and outputs a value of type ResultT.\r\n */\r\nexport class FlowGraphUnaryOperationBlock<InputT, ResultT> extends FlowGraphCachedOperationBlock<ResultT> {\r\n    /**\r\n     * the input of this block\r\n     */\r\n    a: FlowGraphDataConnection<InputT>;\r\n\r\n    constructor(\r\n        inputRichType: RichType<InputT>,\r\n        resultRichType: RichType<ResultT>,\r\n        private _operation: (input: InputT) => ResultT,\r\n        private _className: string,\r\n        config?: IFlowGraphBlockConfiguration\r\n    ) {\r\n        super(resultRichType, config);\r\n        this.a = this.registerDataInput(\"a\", inputRichType);\r\n    }\r\n\r\n    /**\r\n     * the operation performed by this block\r\n     * @param context the graph context\r\n     * @returns the result of the operation\r\n     */\r\n    public override _doOperation(context: FlowGraphContext): ResultT {\r\n        return this._operation(this.a.getValue(context));\r\n    }\r\n\r\n    /**\r\n     * Gets the class name of this block\r\n     * @returns the class name\r\n     */\r\n    public override getClassName(): string {\r\n        return this._className;\r\n    }\r\n}\r\n","import type { IFlowGraphBlockConfiguration } from \"core/FlowGraph/flowGraphBlock\";\nimport { FlowGraphBlock } from \"core/FlowGraph/flowGraphBlock\";\nimport type { FlowGraphContext } from \"core/FlowGraph/flowGraphContext\";\nimport type { FlowGraphDataConnection } from \"core/FlowGraph/flowGraphDataConnection\";\nimport {\n    FlowGraphTypes,\n    getRichTypeByFlowGraphType,\n    RichTypeBoolean,\n    RichTypeMatrix,\n    RichTypeNumber,\n    RichTypeQuaternion,\n    RichTypeVector3,\n} from \"core/FlowGraph/flowGraphRichTypes\";\nimport { Matrix, Quaternion, Vector3 } from \"core/Maths/math.vector\";\nimport { FlowGraphBlockNames } from \"../../flowGraphBlockNames\";\nimport { RegisterClass } from \"core/Misc/typeStore\";\nimport { FlowGraphUnaryOperationBlock } from \"../flowGraphUnaryOperationBlock\";\nimport type { FlowGraphMatrix2D } from \"core/FlowGraph/CustomTypes/flowGraphMatrix\";\nimport { FlowGraphBinaryOperationBlock } from \"../flowGraphBinaryOperationBlock\";\nimport type { FlowGraphMatrix } from \"core/FlowGraph/utils\";\n\n/**\n * Configuration for the matrix blocks.\n */\nexport interface IFlowGraphMatrixBlockConfiguration extends IFlowGraphBlockConfiguration {\n    /**\n     * The type of the matrix. Default is Matrix (which is 4x4)\n     */\n    matrixType: FlowGraphTypes;\n}\n/**\n * Transposes a matrix.\n */\nexport class FlowGraphTransposeBlock extends FlowGraphUnaryOperationBlock<FlowGraphMatrix, FlowGraphMatrix> {\n    /**\n     * Creates a new instance of the block.\n     * @param config the configuration of the block\n     */\n    constructor(config?: IFlowGraphMatrixBlockConfiguration) {\n        super(\n            getRichTypeByFlowGraphType(config?.matrixType || FlowGraphTypes.Matrix),\n            getRichTypeByFlowGraphType(config?.matrixType || FlowGraphTypes.Matrix),\n            (a) => (a.transpose ? a.transpose() : Matrix.Transpose(a as Matrix)),\n            FlowGraphBlockNames.Transpose,\n            config\n        );\n    }\n}\nRegisterClass(FlowGraphBlockNames.Transpose, FlowGraphTransposeBlock);\n\n/**\n * Gets the determinant of a matrix.\n */\nexport class FlowGraphDeterminantBlock extends FlowGraphUnaryOperationBlock<FlowGraphMatrix, number> {\n    /**\n     * Creates a new instance of the block.\n     * @param config the configuration of the block\n     */\n    constructor(config?: IFlowGraphMatrixBlockConfiguration) {\n        super(getRichTypeByFlowGraphType(config?.matrixType || FlowGraphTypes.Matrix), RichTypeNumber, (a) => a.determinant(), FlowGraphBlockNames.Determinant, config);\n    }\n}\nRegisterClass(FlowGraphBlockNames.Determinant, FlowGraphDeterminantBlock);\n\n/**\n * Inverts a matrix.\n */\nexport class FlowGraphInvertMatrixBlock extends FlowGraphUnaryOperationBlock<FlowGraphMatrix, FlowGraphMatrix> {\n    /**\n     * Creates a new instance of the inverse block.\n     * @param config the configuration of the block\n     */\n    constructor(config?: IFlowGraphMatrixBlockConfiguration) {\n        super(\n            getRichTypeByFlowGraphType(config?.matrixType || FlowGraphTypes.Matrix),\n            getRichTypeByFlowGraphType(config?.matrixType || FlowGraphTypes.Matrix),\n            (a) => ((a as FlowGraphMatrix2D).inverse ? (a as FlowGraphMatrix2D).inverse() : Matrix.Invert(a as Matrix)),\n            FlowGraphBlockNames.InvertMatrix,\n            config\n        );\n    }\n}\nRegisterClass(FlowGraphBlockNames.InvertMatrix, FlowGraphInvertMatrixBlock);\n\n/**\n * Multiplies two matrices.\n */\nexport class FlowGraphMatrixMultiplicationBlock extends FlowGraphBinaryOperationBlock<FlowGraphMatrix, FlowGraphMatrix, FlowGraphMatrix> {\n    /**\n     * Creates a new instance of the multiplication block.\n     * Note - this is similar to the math multiplication if not using matrix per-component multiplication.\n     * @param config the configuration of the block\n     */\n    constructor(config?: IFlowGraphMatrixBlockConfiguration) {\n        super(\n            getRichTypeByFlowGraphType(config?.matrixType || FlowGraphTypes.Matrix),\n            getRichTypeByFlowGraphType(config?.matrixType || FlowGraphTypes.Matrix),\n            getRichTypeByFlowGraphType(config?.matrixType || FlowGraphTypes.Matrix),\n            (a, b) => b.multiply(a as any),\n            FlowGraphBlockNames.MatrixMultiplication,\n            config\n        );\n    }\n}\nRegisterClass(FlowGraphBlockNames.MatrixMultiplication, FlowGraphMatrixMultiplicationBlock);\n\n/**\n * Matrix decompose block\n */\nexport class FlowGraphMatrixDecomposeBlock extends FlowGraphBlock {\n    /**\n     * The input of this block\n     */\n    public readonly input: FlowGraphDataConnection<Matrix>;\n\n    /**\n     * The position output of this block\n     */\n    public readonly position: FlowGraphDataConnection<Vector3>;\n    /**\n     * The rotation output of this block\n     */\n    public readonly rotationQuaternion: FlowGraphDataConnection<Quaternion>;\n    /**\n     * The scaling output of this block\n     */\n    public readonly scaling: FlowGraphDataConnection<Vector3>;\n\n    /**\n     * Is the matrix valid\n     */\n    public readonly isValid: FlowGraphDataConnection<boolean>;\n\n    constructor(config?: IFlowGraphBlockConfiguration) {\n        super(config);\n        this.input = this.registerDataInput(\"input\", RichTypeMatrix);\n        this.position = this.registerDataOutput(\"position\", RichTypeVector3);\n        this.rotationQuaternion = this.registerDataOutput(\"rotationQuaternion\", RichTypeQuaternion);\n        this.scaling = this.registerDataOutput(\"scaling\", RichTypeVector3);\n        this.isValid = this.registerDataOutput(\"isValid\", RichTypeBoolean, false);\n    }\n\n    public override _updateOutputs(context: FlowGraphContext) {\n        const cachedExecutionId = context._getExecutionVariable(this, \"executionId\", -1);\n        const cachedPosition = context._getExecutionVariable(this, \"cachedPosition\", null);\n        const cachedRotation = context._getExecutionVariable(this, \"cachedRotation\", null);\n        const cachedScaling = context._getExecutionVariable(this, \"cachedScaling\", null);\n        if (cachedExecutionId === context.executionId && cachedPosition && cachedRotation && cachedScaling) {\n            this.position.setValue(cachedPosition, context);\n            this.rotationQuaternion.setValue(cachedRotation, context);\n            this.scaling.setValue(cachedScaling, context);\n        } else {\n            const matrix = this.input.getValue(context);\n            const position = cachedPosition || new Vector3();\n            const rotation = cachedRotation || new Quaternion();\n            const scaling = cachedScaling || new Vector3();\n            // check matrix last column components should be 0,0,0,1\n            // round them to 4 decimal places\n            const m3 = Math.round(matrix.m[3] * 10000) / 10000;\n            const m7 = Math.round(matrix.m[7] * 10000) / 10000;\n            const m11 = Math.round(matrix.m[11] * 10000) / 10000;\n            const m15 = Math.round(matrix.m[15] * 10000) / 10000;\n            if (m3 !== 0 || m7 !== 0 || m11 !== 0 || m15 !== 1) {\n                this.isValid.setValue(false, context);\n                this.position.setValue(Vector3.Zero(), context);\n                this.rotationQuaternion.setValue(Quaternion.Identity(), context);\n                this.scaling.setValue(Vector3.One(), context);\n                return;\n            }\n            // make the checks for validity\n            const valid = matrix.decompose(scaling, rotation, position);\n            this.isValid.setValue(valid, context);\n            this.position.setValue(position, context);\n            this.rotationQuaternion.setValue(rotation, context);\n            this.scaling.setValue(scaling, context);\n            context._setExecutionVariable(this, \"cachedPosition\", position);\n            context._setExecutionVariable(this, \"cachedRotation\", rotation);\n            context._setExecutionVariable(this, \"cachedScaling\", scaling);\n            context._setExecutionVariable(this, \"executionId\", context.executionId);\n        }\n    }\n\n    public override getClassName(): string {\n        return FlowGraphBlockNames.MatrixDecompose;\n    }\n}\n\nRegisterClass(FlowGraphBlockNames.MatrixDecompose, FlowGraphMatrixDecomposeBlock);\n\n/**\n * Matrix compose block\n */\nexport class FlowGraphMatrixComposeBlock extends FlowGraphBlock {\n    /**\n     * The position input of this block\n     */\n    public readonly position: FlowGraphDataConnection<Vector3>;\n    /**\n     * The rotation input of this block\n     */\n    public readonly rotationQuaternion: FlowGraphDataConnection<Quaternion>;\n    /**\n     * The scaling input of this block\n     */\n    public readonly scaling: FlowGraphDataConnection<Vector3>;\n    /**\n     * The output of this block\n     */\n    public readonly value: FlowGraphDataConnection<Matrix>;\n\n    constructor(config?: IFlowGraphBlockConfiguration) {\n        super(config);\n        this.position = this.registerDataInput(\"position\", RichTypeVector3);\n        this.rotationQuaternion = this.registerDataInput(\"rotationQuaternion\", RichTypeQuaternion);\n        this.scaling = this.registerDataInput(\"scaling\", RichTypeVector3);\n        this.value = this.registerDataOutput(\"value\", RichTypeMatrix);\n    }\n\n    public override _updateOutputs(context: FlowGraphContext) {\n        const cachedExecutionId = context._getExecutionVariable(this, \"executionId\", -1);\n        const cachedMatrix = context._getExecutionVariable(this, \"cachedMatrix\", null);\n        if (cachedExecutionId === context.executionId && cachedMatrix) {\n            this.value.setValue(cachedMatrix, context);\n        } else {\n            const matrix = Matrix.Compose(this.scaling.getValue(context), this.rotationQuaternion.getValue(context), this.position.getValue(context));\n            this.value.setValue(matrix, context);\n            context._setExecutionVariable(this, \"cachedMatrix\", matrix);\n            context._setExecutionVariable(this, \"executionId\", context.executionId);\n        }\n    }\n\n    public override getClassName(): string {\n        return FlowGraphBlockNames.MatrixCompose;\n    }\n}\n\nRegisterClass(FlowGraphBlockNames.MatrixCompose, FlowGraphMatrixComposeBlock);\n","import type { FlowGraphDataConnection } from \"../../flowGraphDataConnection\";\r\nimport type { RichType } from \"../../flowGraphRichTypes\";\r\nimport type { FlowGraphContext } from \"../../flowGraphContext\";\r\nimport type { IFlowGraphBlockConfiguration } from \"../../flowGraphBlock\";\r\nimport { FlowGraphCachedOperationBlock } from \"./flowGraphCachedOperationBlock\";\r\n/**\r\n * The base block for all binary operation blocks. Receives an input of type\r\n * LeftT, one of type RightT, and outputs a value of type ResultT.\r\n */\r\nexport class FlowGraphBinaryOperationBlock<LeftT, RightT, ResultT> extends FlowGraphCachedOperationBlock<ResultT> {\r\n    /**\r\n     * First input of this block\r\n     */\r\n    a: FlowGraphDataConnection<LeftT>;\r\n    /**\r\n     * Second input of this block\r\n     */\r\n    b: FlowGraphDataConnection<RightT>;\r\n\r\n    constructor(\r\n        leftRichType: RichType<LeftT>,\r\n        rightRichType: RichType<RightT>,\r\n        resultRichType: RichType<ResultT>,\r\n        private _operation: (left: LeftT, right: RightT) => ResultT,\r\n        private _className: string,\r\n        config?: IFlowGraphBlockConfiguration\r\n    ) {\r\n        super(resultRichType, config);\r\n        this.a = this.registerDataInput(\"a\", leftRichType);\r\n        this.b = this.registerDataInput(\"b\", rightRichType);\r\n    }\r\n\r\n    /**\r\n     * the operation performed by this block\r\n     * @param context the graph context\r\n     * @returns the result of the operation\r\n     */\r\n    public override _doOperation(context: FlowGraphContext): ResultT {\r\n        const a = this.a.getValue(context);\r\n        const b = this.b.getValue(context);\r\n        return this._operation(a, b);\r\n    }\r\n\r\n    /**\r\n     * Gets the class name of this block\r\n     * @returns the class name\r\n     */\r\n    public override getClassName(): string {\r\n        return this._className;\r\n    }\r\n}\r\n"],"names":["CacheName","CacheExecIdName","FlowGraphCachedOperationBlock","constructor","outputRichType","config","super","this","value","registerDataOutput","isValid","_updateOutputs","context","cachedExecutionId","_getExecutionVariable","cachedValue","executionId","setValue","calculatedValue","_doOperation","_setExecutionVariable","e","FlowGraphUnaryOperationBlock","inputRichType","resultRichType","_operation","_className","a","registerDataInput","getValue","getClassName","FlowGraphTransposeBlock","matrixType","transpose","Transpose","FlowGraphDeterminantBlock","determinant","FlowGraphInvertMatrixBlock","inverse","Invert","FlowGraphMatrixMultiplicationBlock","b","multiply","FlowGraphMatrixDecomposeBlock","input","position","rotationQuaternion","scaling","cachedPosition","cachedRotation","cachedScaling","matrix","rotation","m3","Math","round","m","m7","m11","m15","Zero","Identity","One","valid","decompose","FlowGraphMatrixComposeBlock","cachedMatrix","Compose","FlowGraphBinaryOperationBlock","leftRichType","rightRichType"],"ignoreList":[],"sourceRoot":""}