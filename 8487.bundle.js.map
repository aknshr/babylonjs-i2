{"version":3,"file":"8487.bundle.js","mappings":"sKAYA,MAAMA,EAAO,mBAoBN,MAAMC,EAaD,aAAAC,CAAcC,EAAoCC,GACtD,GAAIA,EAASC,QAAUC,OAAOC,KAAKH,EAASC,QAAQG,OAAS,EAAG,CAC5D,MAAMC,EAAYN,EAAcM,SAAWN,EAAcM,UAAY,CAAC,GACxDA,EAASC,KAAOD,EAASC,MAAQ,CAAC,GAC3CL,OAASD,EAASC,MAC3B,CACJ,CAKA,YAAmBM,GApBH,KAAAC,KAAOZ,EAKhB,KAAAa,SAAU,EAgBbC,KAAKC,QAAUJ,CACnB,CAGO,OAAAK,GACFF,KAAKC,QAAkB,IAC5B,CAMO,aAAAE,CAAcC,EAAiBC,EAAaC,GAC/C,OAAON,KAAKC,QAAQE,cAAcC,EAASC,GAAOE,IAC9CP,KAAKZ,cAAcmB,EAAsBF,GACzCC,EAAOC,KAEf,CAMO,eAAAC,CAAgBJ,EAAiBK,EAAiBH,GACrD,OAAON,KAAKC,QAAQO,gBAAgBJ,EAASK,GAASC,IAClDV,KAAKZ,cAAcsB,EAAeD,GAClCH,EAAOI,KAEf,CAKO,cAAAC,CAAeP,EAAiBQ,EAAqBC,GACxD,MAAMC,EAAkBd,KAAKC,QAAQU,eAAeP,EAASQ,EAAUC,GAEvE,OADAb,KAAKZ,cAAc0B,EAAiBF,GAC7BE,CACX,CAMO,kBAAAC,CAAmBX,EAAiBY,GAEvC,OAAOhB,KAAKC,QAAQc,mBAAmBX,EAASY,GAAWC,MAAMC,IAC7DlB,KAAKZ,cAAc8B,EAAkBF,GAC9BE,IAEf,GAGJ,QAAwBhC,IACxB,QAAsBA,GAAM,GAAQW,GAAW,IAAIV,EAAiBU,I","sources":["webpack://@dev/inspector-v2/../loaders/src/glTF/2.0/Extensions/ExtrasAsMetadata.ts?"],"sourcesContent":["import type { Nullable } from \"core/types\";\r\nimport type { TransformNode } from \"core/Meshes/transformNode\";\r\nimport type { Camera } from \"core/Cameras/camera\";\r\nimport type { AnimationGroup } from \"core/Animations/animationGroup\";\r\n\r\nimport type { IProperty } from \"babylonjs-gltf2interface\";\r\nimport type { INode, ICamera, IMaterial, IAnimation } from \"../glTFLoaderInterfaces\";\r\nimport type { IGLTFLoaderExtension } from \"../glTFLoaderExtension\";\r\nimport type { GLTFLoader } from \"../glTFLoader\";\r\nimport type { Material } from \"core/Materials/material\";\r\nimport { registerGLTFExtension, unregisterGLTFExtension } from \"../glTFLoaderExtensionRegistry\";\r\n\r\nconst NAME = \"ExtrasAsMetadata\";\r\n\r\ndeclare module \"../../glTFFileLoader\" {\r\n    // eslint-disable-next-line jsdoc/require-jsdoc, @typescript-eslint/naming-convention\r\n    export interface GLTFLoaderExtensionOptions {\r\n        /**\r\n         * Defines options for the ExtrasAsMetadata extension.\r\n         */\r\n        // NOTE: Don't use NAME here as it will break the UMD type declarations.\r\n        [\"ExtrasAsMetadata\"]: {};\r\n    }\r\n}\r\n\r\ninterface IObjectWithMetadata {\r\n    metadata: any;\r\n}\r\n\r\n/**\r\n * Store glTF extras (if present) in BJS objects' metadata\r\n */\r\nexport class ExtrasAsMetadata implements IGLTFLoaderExtension {\r\n    /**\r\n     * The name of this extension.\r\n     */\r\n    public readonly name = NAME;\r\n\r\n    /**\r\n     * Defines whether this extension is enabled.\r\n     */\r\n    public enabled = true;\r\n\r\n    private _loader: GLTFLoader;\r\n\r\n    private _assignExtras(babylonObject: IObjectWithMetadata, gltfProp: IProperty): void {\r\n        if (gltfProp.extras && Object.keys(gltfProp.extras).length > 0) {\r\n            const metadata = (babylonObject.metadata = babylonObject.metadata || {});\r\n            const gltf = (metadata.gltf = metadata.gltf || {});\r\n            gltf.extras = gltfProp.extras;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public constructor(loader: GLTFLoader) {\r\n        this._loader = loader;\r\n    }\r\n\r\n    /** @internal */\r\n    public dispose(): void {\r\n        (this._loader as any) = null;\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    // eslint-disable-next-line no-restricted-syntax\r\n    public loadNodeAsync(context: string, node: INode, assign: (babylonTransformNode: TransformNode) => void): Nullable<Promise<TransformNode>> {\r\n        return this._loader.loadNodeAsync(context, node, (babylonTransformNode): void => {\r\n            this._assignExtras(babylonTransformNode, node);\r\n            assign(babylonTransformNode);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    // eslint-disable-next-line no-restricted-syntax\r\n    public loadCameraAsync(context: string, camera: ICamera, assign: (babylonCamera: Camera) => void): Nullable<Promise<Camera>> {\r\n        return this._loader.loadCameraAsync(context, camera, (babylonCamera): void => {\r\n            this._assignExtras(babylonCamera, camera);\r\n            assign(babylonCamera);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    public createMaterial(context: string, material: IMaterial, babylonDrawMode: number): Nullable<Material> {\r\n        const babylonMaterial = this._loader.createMaterial(context, material, babylonDrawMode);\r\n        this._assignExtras(babylonMaterial, material);\r\n        return babylonMaterial;\r\n    }\r\n\r\n    /**\r\n     * @internal\r\n     */\r\n    // eslint-disable-next-line no-restricted-syntax\r\n    public loadAnimationAsync(context: string, animation: IAnimation): Nullable<Promise<AnimationGroup>> {\r\n        // eslint-disable-next-line github/no-then\r\n        return this._loader.loadAnimationAsync(context, animation).then((babylonAnimation: AnimationGroup) => {\r\n            this._assignExtras(babylonAnimation, animation);\r\n            return babylonAnimation;\r\n        });\r\n    }\r\n}\r\n\r\nunregisterGLTFExtension(NAME);\r\nregisterGLTFExtension(NAME, false, (loader) => new ExtrasAsMetadata(loader));\r\n"],"names":["NAME","ExtrasAsMetadata","_assignExtras","babylonObject","gltfProp","extras","Object","keys","length","metadata","gltf","loader","name","enabled","this","_loader","dispose","loadNodeAsync","context","node","assign","babylonTransformNode","loadCameraAsync","camera","babylonCamera","createMaterial","material","babylonDrawMode","babylonMaterial","loadAnimationAsync","animation","then","babylonAnimation"],"ignoreList":[],"sourceRoot":""}