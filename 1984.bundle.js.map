{"version":3,"file":"1984.bundle.js","mappings":"ySAYA,MAAMA,EAA6B,CAC/B,CAAEC,MAAO,QAASC,MAAO,KAAqCC,OAC9D,CAAEF,MAAO,OAAQC,MAAO,KAAqCE,MAC7D,CAAEH,MAAO,OAAQC,MAAO,KAAqCG,MAC7D,CAAEJ,MAAO,SAAUC,MAAO,KAAqCI,SAGtDC,EAA6D,EAAGC,YACzE,MAAOC,EAAgBC,IAAqB,IAAAC,UAAS,CACjDC,qBAAqB,EACrBC,0BAA2B,KAAqCV,QA2BpE,OACI,iCACI,SAAC,IAAc,CAACF,MAAM,oBAAoBa,OAAO,OAAOC,QAAUC,GA1BjD,CAACC,IACtB,MAkBMC,EAAsB,IAAI,IAAWV,EAAMW,YAAaX,EAAO,KAAM,KAAM,KAAM,KAAM,MAlBzEY,eAAgBC,GAChC,GAAIA,EACA,UACU,OAAsBA,EAAWb,EAAO,CAC1CI,oBAAqBH,EAAeG,oBACpCC,0BAA2BJ,EAAeI,4BAG1CL,EAAMc,gBAAgBC,OAAS,GACVf,EAAMc,gBAAgB,GAC9BE,MAAK,EAE1B,CAAE,MAAOC,GACL,IAAOC,MAAM,+BAA+BD,IAChD,CAER,GAEgH,MAChHP,EAAoBS,UAAUV,GAC9BC,EAAoBU,WAKoEC,CAAiBb,MACrG,SAAC,IAAkB,CACff,MAAM,uBACNC,MAAOO,EAAeG,oBACtBkB,SAAW5B,IACPQ,EAAkB,IAAKD,EAAgBG,oBAAqBV,QAGpE,SAAC,IAAQ,CAAC6B,SAAUtB,EAAeG,oBAAmB,UAClD,SAAC,KAA0B,CACvBX,MAAM,uBACN+B,QAAShC,EACTE,MAAOO,EAAeI,0BACtBiB,SAAW5B,IACPQ,EAAkB,IAAKD,EAAgBI,0BAA2BX,aC5D7E+B,EAAuE,CAChFC,aAAc,cACdC,SAAU,CAAC,KACXC,QAAUC,IACN,MAAMC,EAAsBD,EAAaE,kBAAkB,CACvDC,IAAK,kBACLC,QAAS,mBACTC,UAAW,EAAGC,cAAc,SAACpC,EAAqB,CAACC,MAAOmC,MAG9D,MAAO,CACHf,QAAS,KACLU,EAAoBV,cAMpC,GACIgB,mBAAoB,CAACX,G","sources":["webpack://@dev/inspector-v2/./src/components/tools/importTools.tsx?","webpack://@dev/inspector-v2/./src/services/panes/tools/importService.tsx?"],"sourcesContent":["import { useState } from \"react\";\r\nimport type { FunctionComponent } from \"react\";\r\nimport type { Scene } from \"core/scene\";\r\nimport type { DropdownOption } from \"shared-ui-components/fluent/primitives/dropdown\";\r\nimport { ImportAnimationsAsync, SceneLoaderAnimationGroupLoadingMode } from \"core/Loading/sceneLoader\";\r\nimport { FilesInput } from \"core/Misc/filesInput\";\r\nimport { Logger } from \"core/Misc/logger\";\r\nimport { SwitchPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/switchPropertyLine\";\r\nimport { NumberDropdownPropertyLine } from \"shared-ui-components/fluent/hoc/propertyLines/dropdownPropertyLine\";\r\nimport { FileUploadLine } from \"shared-ui-components/fluent/hoc/fileUploadLine\";\r\nimport { Collapse } from \"shared-ui-components/fluent/primitives/collapse\";\r\n\r\nconst AnimationGroupLoadingModes = [\r\n    { label: \"Clean\", value: SceneLoaderAnimationGroupLoadingMode.Clean },\r\n    { label: \"Stop\", value: SceneLoaderAnimationGroupLoadingMode.Stop },\r\n    { label: \"Sync\", value: SceneLoaderAnimationGroupLoadingMode.Sync },\r\n    { label: \"NoSync\", value: SceneLoaderAnimationGroupLoadingMode.NoSync },\r\n] as const satisfies DropdownOption<number>[];\r\n\r\nexport const ImportAnimationsTools: FunctionComponent<{ scene: Scene }> = ({ scene }) => {\r\n    const [importDefaults, setImportDefaults] = useState({\r\n        overwriteAnimations: true,\r\n        animationGroupLoadingMode: SceneLoaderAnimationGroupLoadingMode.Clean,\r\n    });\r\n\r\n    const importAnimations = (event: FileList) => {\r\n        const reloadAsync = async function (sceneFile: File) {\r\n            if (sceneFile) {\r\n                try {\r\n                    await ImportAnimationsAsync(sceneFile, scene, {\r\n                        overwriteAnimations: importDefaults.overwriteAnimations,\r\n                        animationGroupLoadingMode: importDefaults.animationGroupLoadingMode,\r\n                    });\r\n\r\n                    if (scene.animationGroups.length > 0) {\r\n                        const currentGroup = scene.animationGroups[0];\r\n                        currentGroup.play(true);\r\n                    }\r\n                } catch (error) {\r\n                    Logger.Error(`Error importing animations: ${error}`);\r\n                }\r\n            }\r\n        };\r\n\r\n        const filesInputAnimation = new FilesInput(scene.getEngine(), scene, null, null, null, null, null, reloadAsync, null);\r\n        filesInputAnimation.loadFiles(event);\r\n        filesInputAnimation.dispose();\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <FileUploadLine label=\"Import Animations\" accept=\"gltf\" onClick={(evt: FileList) => importAnimations(evt)} />\r\n            <SwitchPropertyLine\r\n                label=\"Overwrite Animations\"\r\n                value={importDefaults.overwriteAnimations}\r\n                onChange={(value) => {\r\n                    setImportDefaults({ ...importDefaults, overwriteAnimations: value });\r\n                }}\r\n            />\r\n            <Collapse visible={!importDefaults.overwriteAnimations}>\r\n                <NumberDropdownPropertyLine\r\n                    label=\"Animation Merge Mode\"\r\n                    options={AnimationGroupLoadingModes}\r\n                    value={importDefaults.animationGroupLoadingMode}\r\n                    onChange={(value) => {\r\n                        setImportDefaults({ ...importDefaults, animationGroupLoadingMode: value });\r\n                    }}\r\n                />\r\n            </Collapse>\r\n        </>\r\n    );\r\n};\r\n","import type { ServiceDefinition } from \"../../../modularity/serviceDefinition\";\r\nimport { ToolsServiceIdentity } from \"../toolsService\";\r\nimport type { IToolsService } from \"../toolsService\";\r\nimport { ImportAnimationsTools } from \"../../../components/tools/importTools\";\r\n\r\nexport const SceneImportServiceDefinition: ServiceDefinition<[], [IToolsService]> = {\r\n    friendlyName: \"Import Tool\",\r\n    consumes: [ToolsServiceIdentity],\r\n    factory: (toolsService) => {\r\n        const contentRegistration = toolsService.addSectionContent({\r\n            key: \"AnimationImport\",\r\n            section: \"Animation Import\",\r\n            component: ({ context }) => <ImportAnimationsTools scene={context} />,\r\n        });\r\n\r\n        return {\r\n            dispose: () => {\r\n                contentRegistration.dispose();\r\n            },\r\n        };\r\n    },\r\n};\r\n\r\nexport default {\r\n    serviceDefinitions: [SceneImportServiceDefinition],\r\n} as const;\r\n"],"names":["AnimationGroupLoadingModes","label","value","Clean","Stop","Sync","NoSync","ImportAnimationsTools","scene","importDefaults","setImportDefaults","useState","overwriteAnimations","animationGroupLoadingMode","accept","onClick","evt","event","filesInputAnimation","getEngine","async","sceneFile","animationGroups","length","play","error","Error","loadFiles","dispose","importAnimations","onChange","visible","options","SceneImportServiceDefinition","friendlyName","consumes","factory","toolsService","contentRegistration","addSectionContent","key","section","component","context","serviceDefinitions"],"ignoreList":[],"sourceRoot":""}