"use strict";(self.webpackChunk_dev_inspector_v2=self.webpackChunk_dev_inspector_v2||[]).push([[645],{10645:(e,t,n)=>{n.d(t,{KHR_lights:()=>d});var s=n(31273),o=n(43291),i=n(75200),a=n(65198),l=n(814),r=n(14390),h=n(69884),c=n(96734);const _="KHR_lights_punctual";class d{constructor(e){this.name=_,this._loader=e,this.enabled=this._loader.isExtensionUsed(_)}dispose(){this._loader=null,delete this._lights}onLoading(){const e=this._loader.gltf.extensions;if(e&&e[this.name]){const t=e[this.name];this._lights=t.lights,h.l2.Assign(this._lights)}}loadNodeAsync(e,t,n){return h.BT.LoadExtensionAsync(e,t,this.name,(async(c,_)=>(this._loader._allMaterialsDirtyRequired=!0,await this._loader.loadNodeAsync(e,t,(e=>{let t;const d=h.l2.Get(c,this._lights,_.light),b=d.name||e.name;switch(this._loader.babylonScene._blockEntityCollection=!!this._loader._assetContainer,d.type){case"directional":{const e=new i.Z(b,s.Pq.Backward(),this._loader.babylonScene);e.position.setAll(0),t=e;break}case"point":t=new a.H(b,s.Pq.Zero(),this._loader.babylonScene);break;case"spot":{const e=new l.n(b,s.Pq.Zero(),s.Pq.Backward(),0,1,this._loader.babylonScene);e.angle=2*(d.spot&&d.spot.outerConeAngle||Math.PI/4),e.innerAngle=2*(d.spot&&d.spot.innerConeAngle||0),t=e;break}default:throw this._loader.babylonScene._blockEntityCollection=!1,new Error(`${c}: Invalid light type (${d.type})`)}t._parentContainer=this._loader._assetContainer,this._loader.babylonScene._blockEntityCollection=!1,d._babylonLight=t,t.falloffType=r.v.FALLOFF_GLTF,t.diffuse=d.color?o.v9.FromArray(d.color):o.v9.White(),t.intensity=null==d.intensity?1:d.intensity,t.range=null==d.range?Number.MAX_VALUE:d.range,t.parent=e,this._loader._babylonLights.push(t),h.BT.AddPointerMetadata(t,c),n(e)})))))}}(0,c.Hg)(_),(0,c.Ye)(_,!0,(e=>new d(e)))}}]);
//# sourceMappingURL=645.bundle.js.map