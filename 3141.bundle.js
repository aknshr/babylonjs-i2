"use strict";(self.webpackChunk_dev_inspector_v2=self.webpackChunk_dev_inspector_v2||[]).push([[3141],{3141:(e,t,s)=>{s.d(t,{STLFileLoader:()=>c});var n=s(21148),r=s(92230),i=s(74421),o=s(55179),a=s(51067),l=s(49522);s(83959);class c{constructor(){this.solidPattern=/solid (\S*)([\S\s]*?)endsolid[ ]*(\S*)/g,this.facetsPattern=/facet([\s\S]*?)endfacet/g,this.normalPattern=/normal[\s]+([-+]?[0-9]+\.?[0-9]*([eE][-+]?[0-9]+)?)+[\s]+([-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?)+[\s]+([-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?)+/g,this.vertexPattern=/vertex[\s]+([-+]?[0-9]+\.?[0-9]*([eE][-+]?[0-9]+)?)+[\s]+([-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?)+[\s]+([-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?)+/g,this.name=l.W.name,this.extensions=l.W.extensions}importMesh(e,t,s,r,o){let a;if("string"!=typeof s){if(this._isBinary(s)){const e=new i.e("stlmesh",t);return this._parseBinary(e,s),o&&o.push(e),!0}s=(new TextDecoder).decode(new Uint8Array(s))}for(;a=this.solidPattern.exec(s);){let s=a[1];const r=a[3];if(r&&s!=r)return n.S0.Error("Error in STL, solid name != endsolid name"),!1;if(e&&s)if(e instanceof Array){if(!e.indexOf(s))continue}else if(s!==e)continue;s=s||"stlmesh";const l=new i.e(s,t);this._parseASCII(l,a[2]),o&&o.push(l)}return!0}load(e,t,s){return this.importMesh(null,e,t,s,null)}loadAssetContainer(e,t,s){const n=new a.WZ(e);return e._blockEntityCollection=!0,this.importMesh(null,e,t,s,n.meshes),e._blockEntityCollection=!1,n}_isBinary(e){const t=new DataView(e);if(t.byteLength<=80)return!1;if(84+50*t.getUint32(80,!0)===t.byteLength)return!0;const s=[115,111,108,105,100];for(let e=0;e<5;e++)if(t.getUint8(e)!==s[e])return!0;return!1}_parseBinary(e,t){const s=new DataView(t),n=s.getUint32(80,!0);let i=0;const o=new Float32Array(3*n*3),a=new Float32Array(3*n*3),l=new Uint32Array(3*n);let u=0;for(let e=0;e<n;e++){const t=84+50*e,n=s.getFloat32(t,!0),r=s.getFloat32(t+4,!0),h=s.getFloat32(t+8,!0);for(let e=1;e<=3;e++){const l=t+12*e;o[i]=s.getFloat32(l,!0),a[i]=n,c.DO_NOT_ALTER_FILE_COORDINATES?(o[i+1]=s.getFloat32(l+4,!0),o[i+2]=s.getFloat32(l+8,!0),a[i+1]=r,a[i+2]=h):(o[i+2]=s.getFloat32(l+4,!0),o[i+1]=s.getFloat32(l+8,!0),a[i+2]=r,a[i+1]=h),i+=3}c.DO_NOT_ALTER_FILE_COORDINATES?(l[u]=u,l[u+1]=u+2,l[u+2]=u+1,u+=3):(l[u]=u++,l[u]=u++,l[u]=u++)}e.setVerticesData(r.R.PositionKind,o),e.setVerticesData(r.R.NormalKind,a),e.setIndices(l),e.computeWorldMatrix(!0)}_parseASCII(e,t){const s=[],n=[],i=[];let o,a=0;for(;o=this.facetsPattern.exec(t);){const e=o[1],t=this.normalPattern.exec(e);if(this.normalPattern.lastIndex=0,!t)continue;const r=[Number(t[1]),Number(t[5]),Number(t[3])];let l;for(;l=this.vertexPattern.exec(e);)c.DO_NOT_ALTER_FILE_COORDINATES?(s.push(Number(l[1]),Number(l[3]),Number(l[5])),n.push(r[0],r[2],r[1])):(s.push(Number(l[1]),Number(l[5]),Number(l[3])),n.push(r[0],r[1],r[2]));c.DO_NOT_ALTER_FILE_COORDINATES?(i.push(a,a+2,a+1),a+=3):i.push(a++,a++,a++),this.vertexPattern.lastIndex=0}this.facetsPattern.lastIndex=0,e.setVerticesData(r.R.PositionKind,s),e.setVerticesData(r.R.NormalKind,n),e.setIndices(i),e.computeWorldMatrix(!0)}}c.DO_NOT_ALTER_FILE_COORDINATES=!1,(0,o.qS)(new c)}}]);
//# sourceMappingURL=3141.bundle.js.map